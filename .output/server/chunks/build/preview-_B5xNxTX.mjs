import{bh as e,at as s,t as a,aI as r,r as n,j as l,L as t,aW as i,aG as o,b9 as c,M as m}from"../nitro/nitro.mjs";import{l as d}from"./company-logo-B5lxhvXb.mjs";import{c as x,l as p}from"./link-chain-ChxIEzv5.mjs";import{i as g,r as j,o as f,n as h,h as N,e as u}from"./globe-BUymkEPS.mjs";import{c as y}from"./use-image-preview-D0S5Wc-4.mjs";import{_ as b}from"./create-company-BgWo2uPN.mjs";import"node:net";import"node:stream";import"node:events";import"node:process";import"node:buffer";import"node:timers";import"node:async_hooks";import"node:url";import"node:stream/web";import"node:crypto";import"./company.schema-5gxzbh_J.mjs";import"../_/index2.mjs";const v={remote:"À distance",hybrid:"Hybride",onsite:"Sur site",not_specified:"Non spécifié"},w={facebook:l.jsx(u,{className:"size-5"}),instagram:l.jsx(N,{className:"size-5"}),linkedin:l.jsx(c,{className:"size-5"}),calendly:l.jsx(h,{className:"size-5"})},be=function(){var c,h;const{preview:N,queryClient:u}=e.useRouteContext(),{data:_}=s(o),k=e.useNavigate(),{imagePreviews:z,readImage:E}=y(),{mutate:q,isPending:O}=a({mutationFn:r(b)});n.useEffect((()=>{N.logo&&E({type:"logo",file:N.logo}),N.gallery&&N.gallery.forEach(((e,s)=>{E({type:"gallery",file:e,index:s})}))}),[N.logo,N.gallery,E]);const S={facebook:N.social_media.facebook,instagram:N.social_media.instagram,linkedin:N.social_media.linkedin,calendly:N.social_media.calendly},C=Object.values(S).every((e=>""===e));return l.jsxs("main",{className:"px-4 py-8 grid gap-4",children:[l.jsx(t,{to:"/compte/entreprises/create",className:"text-sm text-gray-500",children:"Retour"}),l.jsxs("div",{className:"container flex justify-between gap-4 border border-gray-300 p-6 rounded-sm",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(d,{url:z.logo,name:N.name,size:"lg"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h1",{className:"text-2xl font-bold",children:N.name}),l.jsx(x,{children:N.siret})]}),N.categories.length?l.jsx("ul",{className:"flex flex-wrap gap-2",children:null==(c=N.categories)?void 0:c.map((e=>{const s=_.find((s=>s.id===e));return s?l.jsx("li",{className:"bg-gray-400 text-white px-2 py-1 rounded-sm text-xs",children:l.jsx("span",{className:"max-w-[30ch] truncate",children:s.name})},s.id):null}))}):null]}),l.jsx("div",{className:"flex gap-2",children:l.jsx("button",{type:"button",className:"bg-gray-100 p-2 rounded-sm cursor-pointer h-min",children:l.jsx(p,{className:"size-5"})})})]}),l.jsxs("div",{className:"container flex gap-2",children:[l.jsxs("div",{className:"flex-1 flex flex-col justify-center gap-4 border border-gray-300 p-6 rounded-sm",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(g,{className:"size-5"}),l.jsx("p",{className:"text-xs text-gray-500",children:N.email||"Non renseigné"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(j,{className:"size-5"}),l.jsx("p",{className:"text-xs text-gray-500",children:N.phone||"Non renseigné"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(f,{className:"size-5"}),N.website?l.jsx("a",{href:N.website,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-gray-500",children:N.website}):l.jsx("span",{className:"text-xs text-gray-500",children:"Non renseigné"})]})]}),C?null:l.jsx("ul",{className:"flex gap-2",children:Object.entries(S).map((([e,s])=>l.jsx("li",{children:l.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:w[e]})},e)))})]}),l.jsxs("div",{className:"flex-1 border border-gray-300 p-6 rounded-sm flex flex-col gap-2",children:[l.jsxs("p",{className:"text-sm text-gray-500",children:[l.jsx("span",{className:"font-bold",children:"Entrepreneur:"})," ",N.business_owner||"Non renseigné"]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[l.jsx("span",{className:"font-bold",children:"Zone géographique:"})," ",N.service_area||"Non renseigné"]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[l.jsx("span",{className:"font-bold",children:"Mode de travail:"})," ",v[null!=(h=N.work_mode)?h:"not_specified"]]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[l.jsx("span",{className:"font-bold",children:"RQTH:"})," ",N.rqth?"Oui":"Non"]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[l.jsx("span",{className:"font-bold",children:"Sous domaine:"})," ",N.subdomain||"Non renseigné"]})]})]}),l.jsxs("div",{className:"container border border-gray-300 p-6 rounded-sm grid gap-4",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("h2",{className:"text-lg font-bold",children:"Description"}),l.jsx("p",{className:"text-sm text-gray-500 text-pretty",children:N.description||"Non renseigné"})]}),z.gallery.length?l.jsxs(l.Fragment,{children:[l.jsx(i,{className:"h-px bg-gray-300 my-4"}),l.jsx("ul",{className:"flex flex-wrap gap-2",children:z.gallery.map(((e,s)=>l.jsx("li",{children:l.jsx("img",{src:e,alt:N.name,className:"size-16 aspect-square rounded-sm"})},s)))})]}):null]}),l.jsxs("div",{className:"container flex justify-end gap-2",children:[l.jsx(t,{to:"/compte/entreprises/create",className:"bg-gray-800 text-white px-3 py-2 rounded-sm font-light text-xs",children:"Retour"}),l.jsx("button",{type:"submit",className:"bg-gray-800 text-white px-3 py-2 rounded-sm font-light text-xs",onClick:function(){const e=new FormData;for(const[s,a]of Object.entries(N))"string"==typeof a&&e.append(s,a);for(const s of N.categories)e.append("categories",s);if(N.logo&&e.append("logo",N.logo),N.gallery)for(const s of N.gallery)e.append("gallery",s);console.log(Object.fromEntries(e.entries())),q({data:e},{onSuccess:()=>{m.success("Entreprise créée avec succès"),u.invalidateQueries({queryKey:["user","companies"]}),k({to:"/compte/entreprises"})}})},disabled:O,children:O?"Validation en cours...":"Valider"})]})]})};export{be as component};
//# sourceMappingURL=preview-_B5xNxTX.mjs.map
