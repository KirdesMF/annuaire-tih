import{jsx as e,jsxs as o}from"react/jsx-runtime";import{useMutation as h}from"@tanstack/react-query";import{toast as i}from"sonner";import*as t from"valibot";import{I as f}from"./input-DBDjV_JP.js";import{L as b}from"./label-DH_rTUQU.js";import{o as m,n as v,k as w}from"./ssr-Bxxdisao.js";import{createServerFn as x}from"@tanstack/start-client-core";import"@tanstack/react-router";import"radix-ui";import"drizzle-orm/pg-core";import"better-auth/react";import"better-auth/client/plugins";import"zustand";import"@tanstack/router-core";import"@tanstack/start-server-core";import"react";import"cmdk";import"clsx";import"tailwind-merge";import"@tanstack/react-query-devtools";import"drizzle-orm";import"nanoid";import"@tanstack/react-router-with-query";import"tiny-invariant";import"node:stream";import"isbot";import"react-dom/server";const S=t.object({token:t.string(),newPassword:t.string()}),g=w("app_routes_auth_reset-password_tsx--resetPasswordFn_createServerFn_handler","/_server"),F=x({method:"POST"}).validator(s=>{const r=Object.fromEntries(s.entries());return t.parse(S,r)}).handler(g),X=function(){const r=m.useSearch(),p=m.useNavigate(),{mutate:c,isPending:n}=h({mutationFn:v(F)});function d(a){a.preventDefault();const l=new FormData(a.target);c({data:l},{onSuccess:()=>{i.success("Mot de passe réinitialisé avec succès"),p({to:"/login"})},onError:u=>{i.error(u.message)}})}return e("main",{children:o("div",{className:"container px-4 py-12",children:[e("h1",{className:"text-2xl font-bold mb-6",children:"Réinitialiser le mot de passe"}),o("form",{className:"flex flex-col gap-6",onSubmit:d,children:[e("input",{type:"hidden",name:"token",value:r.token}),o(b,{children:["Nouveau mot de passe *",e(f,{type:"password",name:"newPassword",placeholder:"Mot de passe"})]}),e("button",{type:"submit",className:"border border-blue-400 text-blue-400 hover:bg-blue-400 hover:text-white transition-colors p-2 rounded-sm font-medium text-sm",disabled:n,children:n?"Réinitialisation en cours...":"Réinitialiser"})]})]})})};export{X as component};
