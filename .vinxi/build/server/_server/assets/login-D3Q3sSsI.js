import{createFileRoute as t,lazyRouteComponent as i,redirect as n}from"@tanstack/react-router";import*as o from"valibot";import{a as p}from"./auth.server-DtTByMvE.js";import{c as m}from"./index-8Htcofqc.js";import{createServerFn as a}from"@tanstack/start-client-core";import"better-auth";import"better-auth/adapters/drizzle";import"better-auth/plugins";import"./auth-BsEI6_U5.js";import"drizzle-orm/pg-core";import"better-auth/react-start";import"resend";import"tiny-invariant";import"drizzle-orm/postgres-js";import"postgres";import"dotenv";const s=()=>import("./login-D6TBmk3F.js"),c=o.object({email:o.pipe(o.string(),o.email()),password:o.pipe(o.string(),o.minLength(8))}),l=m("app_routes_auth_login_tsx--loginFn_createServerFn_handler","/_server",(r,e)=>g.__executeServer(r,e)),g=a({method:"POST"}).validator(r=>o.parse(c,r)).handler(l,async({data:r})=>{console.log(r),await p.api.signInEmail({body:{email:r.email,password:r.password}})}),_=t("/(auth)/login")({component:i(s,"component",()=>_.ssr),beforeLoad:async({context:r})=>{if(r.user)throw n({to:"/compte/entreprises"})}});export{l as loginFn_createServerFn_handler};
