import{eventHandler as d,toWebRequest as f}from"@tanstack/start-server-core";const m=[{path:"/__root",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/__root.tsx"},{path:"/",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/index.tsx"},{path:"/(auth)/forgot-password",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/(auth)/forgot-password.tsx"},{path:"/(auth)/login",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/(auth)/login.tsx"},{path:"/(auth)/reset-password",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/(auth)/reset-password.tsx"},{path:"/(auth)/signup",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/(auth)/signup.tsx"},{path:"/(public)/about",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/(public)/about.tsx"},{path:"/(public)/contact",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/(public)/contact.tsx"},{path:"/(public)/faq",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/(public)/faq.tsx"},{path:"/(public)/partner",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/(public)/partner.tsx"},{path:"/(public)/sources",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/(public)/sources.tsx"},{path:"/_protected/route",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/_protected/route.tsx"},{path:"/admin/dashboard",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/admin/dashboard.tsx"},{path:"/admin",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/admin/index.tsx"},{path:"/admin/route",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/admin/route.tsx"},{path:"/(public)/categories/:$slug?",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/(public)/categories/$slug.tsx"},{path:"/(public)/entreprises/:$slug?",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/(public)/entreprises/$slug.tsx"},{path:"/_protected/compte",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/_protected/compte/index.tsx"},{path:"/_protected/compte/preferences",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/_protected/compte/preferences.tsx"},{path:"/_protected/compte/route",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/_protected/compte/route.tsx"},{path:"/api/auth/*splat",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/api/auth/$.ts",$APIRoute:{src:"app/routes/api/auth/$.ts?pick=APIRoute",build:()=>import("../_.js"),import:()=>import("../_.js")}},{path:"/_protected/compte/entreprises",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/_protected/compte/entreprises/index.tsx"},{path:"/_protected/compte/entreprises/create",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/_protected/compte/entreprises/create/index.tsx"},{path:"/_protected/compte/entreprises/create/preview",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/_protected/compte/entreprises/create/preview.tsx"},{path:"/_protected/compte/entreprises/:$slug?/edit",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/_protected/compte/entreprises/$slug/edit/index.tsx"},{path:"/_protected/compte/entreprises/:$slug?/edit/infos",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/_protected/compte/entreprises/$slug/edit/infos.tsx"},{path:"/_protected/compte/entreprises/:$slug?/edit/medias",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/_protected/compte/entreprises/$slug/edit/medias.tsx"},{path:"/_protected/compte/entreprises/:$slug?/edit/preview",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/_protected/compte/entreprises/$slug/edit/preview.tsx"},{path:"/_protected/compte/entreprises/:$slug?/edit/route",filePath:"/Users/kirdes/Dev/@annuaire-tih/app/routes/_protected/compte/entreprises/$slug/edit/route.tsx"}],P=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"];function k(e){return d(async r=>{const a=f(r);return await e({request:a})})}const D=e=>r=>({path:e,methods:r});function v(e,r){const a=e.pathname.split("/").filter(Boolean),p=r.sort((s,t)=>{const i=s.routePath.split("/").filter(Boolean);return t.routePath.split("/").filter(Boolean).length-i.length}).filter(s=>{const t=s.routePath.split("/").filter(Boolean);return a.length>=t.length});for(const s of p){const t=s.routePath.split("/").filter(Boolean),i={};let o=!0;for(let n=0;n<t.length;n++){const h=t[n],l=a[n];if(h.startsWith("$"))if(h==="$"){const u=a.slice(n).join("/");if(u!=="")i["*"]=u,i._splat=u;else{o=!1;break}}else{const u=h.slice(1);i[u]=l}else if(h!==l){o=!1;break}}if(o)return{routePath:s.routePath,params:i,payload:s.payload}}}const c=m.filter(e=>e.$APIRoute);function x(e){const r=[];return e.forEach(a=>{const s=a.path.split("/").filter(Boolean).map(t=>t==="*splat"?"$":t.startsWith(":$")&&t.endsWith("?")?t.slice(1,-1):t).join("/");r.push({routePath:`/${s}`,payload:a})}),r}const U=async({request:e})=>{if(!c.length)return new Response("No routes found",{status:404});if(!P.includes(e.method))return new Response("Method not allowed",{status:405});const r=x(c),a=new URL(e.url,"http://localhost:3000"),p=v(a,r);if(!p)return new Response("Not found",{status:404});let s;try{s=await p.payload.$APIRoute.import().then(o=>o.APIRoute)}catch(o){return console.error("Error importing route file:",o),new Response("Internal server error",{status:500})}if(!s)return new Response("Internal server error",{status:500});const t=e.method,i=s.methods[t];return i?await i({request:e,params:p.params}):new Response("Method not allowed",{status:405})};export{D as a,k as c,U as d};
