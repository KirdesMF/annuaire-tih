import{RouterProvider as fe,Link as y,useRouter as be,createRootRouteWithContext as ye,Outlet as Re,HeadContent as xe,Scripts as ve,createFileRoute as i,lazyRouteComponent as a,redirect as $,createRouter as $e}from"@tanstack/react-router";import{jsx as r,jsxs as s}from"react/jsx-runtime";import{useMutation as qe,queryOptions as T,QueryClient as we}from"@tanstack/react-query";import{createAuthClient as Ce}from"better-auth/react";import{adminClient as Pe}from"better-auth/client/plugins";import{DropdownMenu as c,Avatar as w}from"radix-ui";import{useState as Ne}from"react";import{pgTable as C,timestamp as g,text as l,boolean as L,varchar as h,jsonb as F,uuid as Se,index as Te}from"drizzle-orm/pg-core";import{toast as O,Toaster as Ie}from"sonner";import{ReactQueryDevtools as ze}from"@tanstack/react-query-devtools";import{isPlainObject as Fe,encode as Le,isRedirect as Ae,isNotFound as Ve}from"@tanstack/router-core";import{startSerializer as v,mergeHeaders as E,createServerFn as R}from"@tanstack/start-client-core";import{defineHandlerCallback as Ee,transformReadableStreamWithRouter as ke,transformPipeableStreamWithRouter as je,getHeaders as Me,getEvent as He,createStartHandler as Oe}from"@tanstack/start-server-core";import*as t from"valibot";import{sql as De}from"drizzle-orm";import{decode as Qe}from"decode-formdata";import{routerWithQueryClient as Be}from"@tanstack/react-router-with-query";import We from"tiny-invariant";import{PassThrough as Ke}from"node:stream";import{isbot as k}from"isbot";import N from"react-dom/server";function j(e){return r(fe,{router:e.router})}const Ge=Ee(async({request:e,router:n,responseHeaders:o})=>{if(typeof N.renderToReadableStream=="function"){const p=await N.renderToReadableStream(r(j,{router:n}),{signal:e.signal});k(e.headers.get("User-Agent"))&&await p.allReady;const m=ke(n,p);return new Response(m,{status:n.state.statusCode,headers:o})}if(typeof N.renderToPipeableStream=="function"){const p=new Ke;try{const _=N.renderToPipeableStream(r(j,{router:n}),{...k(e.headers.get("User-Agent"))?{onAllReady(){_.pipe(p)}}:{onShellReady(){_.pipe(p)}},onError:(f,d)=>{console.error("Error in renderToPipeableStream:",f,d)}})}catch(_){console.error("Error in renderToPipeableStream:",_)}const m=je(n,p);return new Response(m,{status:n.state.statusCode,headers:o})}throw new Error("No renderToReadableStream or renderToPipeableStream found in react-dom/server. Ensure you are using a version of react-dom that supports streaming.")}),Ue=()=>({routes:{__root__:{filePath:"__root.tsx",children:["/_admin","/_protected","/_auth/forgot-password","/_auth/login","/_auth/reset-password","/_auth/signup","/_public/about","/_public/contact","/_public/faq","/_public/partner","/_public/sources","/_public/","/_public/categories/$id","/_public/entreprises/$name","/_public/categories/","/_public/entrepreneurs/"],preloads:["/_build/assets/client-CYiiBgAW.js","/_build/assets/client-CB7jT4PR.js"]},"/_admin":{filePath:"_admin/route.tsx",children:["/_admin/admin/dashboard"]},"/_protected":{filePath:"_protected/route.tsx",children:["/_protected/_compte","/_protected/reference"]},"/_protected/_compte":{filePath:"_protected/_compte/route.tsx",parent:"/_protected",children:["/_protected/_compte/compte/preferences","/_protected/_compte/compte/entreprises/add","/_protected/_compte/compte/entreprises/preview","/_protected/_compte/compte/entreprises/","/_protected/_compte/compte/entreprises/$id/edit"]},"/_auth/forgot-password":{filePath:"_auth/forgot-password.tsx"},"/_auth/login":{filePath:"_auth/login.tsx"},"/_auth/reset-password":{filePath:"_auth/reset-password.tsx"},"/_auth/signup":{filePath:"_auth/signup.tsx"},"/_protected/reference":{filePath:"_protected/reference.tsx",parent:"/_protected"},"/_public/about":{filePath:"_public/about.tsx"},"/_public/contact":{filePath:"_public/contact.tsx"},"/_public/faq":{filePath:"_public/faq.tsx"},"/_public/partner":{filePath:"_public/partner.tsx"},"/_public/sources":{filePath:"_public/sources.tsx"},"/_public/":{filePath:"_public/index.tsx"},"/_admin/admin/dashboard":{filePath:"_admin/admin/dashboard.tsx",parent:"/_admin"},"/_public/categories/$id":{filePath:"_public/categories/$id.tsx"},"/_public/entreprises/$name":{filePath:"_public/entreprises/$name.tsx"},"/_public/categories/":{filePath:"_public/categories/index.tsx"},"/_public/entrepreneurs/":{filePath:"_public/entrepreneurs/index.tsx"},"/_protected/_compte/compte/preferences":{filePath:"_protected/_compte/compte/preferences.tsx",parent:"/_protected/_compte"},"/_protected/_compte/compte/entreprises/add":{filePath:"_protected/_compte/compte/entreprises/add.tsx",parent:"/_protected/_compte"},"/_protected/_compte/compte/entreprises/preview":{filePath:"_protected/_compte/compte/entreprises/preview.tsx",parent:"/_protected/_compte"},"/_protected/_compte/compte/entreprises/":{filePath:"_protected/_compte/compte/entreprises/index.tsx",parent:"/_protected/_compte"},"/_protected/_compte/compte/entreprises/$id/edit":{filePath:"_protected/_compte/compte/entreprises/$id/edit.tsx",parent:"/_protected/_compte"}}});function Je(e){return globalThis.MANIFEST[e]}function Ye(){const e=Ue(),n=e.routes.__root__=e.routes.__root__||{};n.assets=n.assets||[];let o="";const p=Je("client"),m=p.inputs[p.handler]?.output.path;return m||We(m,"Could not find client entry in vinxi manifest"),n.assets.push({tag:"script",attrs:{type:"module",suppressHydrationWarning:!0,async:!0},children:`${o}import("${m}")`}),e}function Xe(){const e=Ye();return{...e,routes:Object.fromEntries(Object.entries(e.routes).map(([n,o])=>{const{preloads:p,assets:m}=o;return[n,{preloads:p,assets:m}]}))}}async function Ze(e,n,o){var p;const m=n[0];if(Fe(m)&&m.method){const d=m,P=d.data instanceof FormData?"formData":"payload",I=new Headers({...P==="payload"?{"content-type":"application/json",accept:"application/json"}:{},...d.headers instanceof Headers?Object.fromEntries(d.headers.entries()):d.headers});if(d.method==="GET"){const b=Le({payload:v.stringify({data:d.data,context:d.context})});b&&(e.includes("?")?e+=`&${b}`:e+=`?${b}`)}e.includes("?")?e+="&createServerFn":e+="?createServerFn",d.response==="raw"&&(e+="&raw");const _e=await o(e,{method:d.method,headers:I,signal:d.signal,...et(d)}),z=await M(_e);if((p=z.headers.get("content-type"))!=null&&p.includes("application/json")){const b=v.decode(await z.json());if(Ae(b)||Ve(b)||b instanceof Error)throw b;return b}return z}const _=await M(await o(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})),f=_.headers.get("content-type");return f&&f.includes("application/json")?v.decode(await _.json()):_.text()}function et(e){return e.method==="POST"?e.data instanceof FormData?(e.data.set("__TSR_CONTEXT",v.stringify(e.context)),{body:e.data}):{body:v.stringify({data:e.data??null,context:e.context})}:{}}async function M(e){if(!e.ok){const n=e.headers.get("content-type");throw n&&n.includes("application/json")?v.decode(await e.json()):new Error(await e.text())}return e}function tt(e){return e.replace(/^\/|\/$/g,"")}const x=(e,n)=>{const o=`/${tt(n)}/${e}`;return Object.assign((...m)=>Ze(o,m,async(_,f)=>{f.headers=E(Me(),f.headers);const d=await $fetch.native(_,f),P=He(),I=E(d.headers,P.___ssrRpcResponseHeaders);return P.___ssrRpcResponseHeaders=I,d}),{url:o,functionId:e})};function rt(e){return s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",...e,children:[r("title",{children:"Linkedin"}),r("path",{fill:"currentColor",d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037c-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85c3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.06 2.06 0 0 1-2.063-2.065a2.064 2.064 0 1 1 2.063 2.065m1.782 13.019H3.555V9h3.564zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0z"})]})}const D=Ce({plugins:[Pe()]});function nt(e){return s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",...e,children:[r("title",{children:"Logout"}),r("path",{fill:"currentColor",d:"M5.616 20q-.691 0-1.153-.462T4 18.384V5.616q0-.691.463-1.153T5.616 4h5.903q.214 0 .357.143t.143.357t-.143.357t-.357.143H5.616q-.231 0-.424.192T5 5.616v12.769q0 .23.192.423t.423.192h5.904q.214 0 .357.143t.143.357t-.143.357t-.357.143zm12.444-7.5H9.692q-.213 0-.356-.143T9.192 12t.143-.357t.357-.143h8.368l-1.971-1.971q-.141-.14-.15-.338q-.01-.199.15-.364q.159-.165.353-.168q.195-.003.36.162l2.614 2.613q.242.243.242.566t-.243.566l-2.613 2.613q-.146.146-.347.153t-.366-.159q-.16-.165-.157-.357t.162-.35z"})]})}function ot(e){return s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",...e,children:[r("title",{children:"Settings account"}),r("path",{fill:"currentColor",d:"M14.654 21.846q-.529 0-.9-.37t-.37-.899v-5.923q0-.529.37-.9t.9-.37h5.923q.529 0 .899.37t.37.9v5.923q0 .529-.37.899t-.899.37zM11 17.386V21h-.098q-.348 0-.576-.229t-.29-.571l-.263-2.092q-.479-.145-1.036-.454q-.556-.31-.947-.664l-1.915.824q-.317.14-.644.03t-.504-.415L3.648 15.57q-.177-.305-.104-.638t.348-.546l1.672-1.25q-.045-.272-.073-.559q-.03-.288-.03-.559q0-.252.03-.53q.028-.278.073-.626l-1.672-1.25q-.275-.213-.338-.555t.113-.648l1.06-1.8q.177-.287.504-.406t.644.021l1.896.804q.448-.373.97-.673q.52-.3 1.013-.464l.283-2.092q.061-.342.318-.571T10.96 3h2.08q.349 0 .605.229q.257.229.319.571l.263 2.112q.575.202 1.016.463t.909.654l1.992-.804q.318-.14.645-.021t.503.406l1.06 1.819q.177.306.104.641q-.073.336-.348.544l-1.216.911q-.176.135-.362.133t-.346-.173t-.148-.38t.183-.347l1.225-.908l-.994-1.7l-2.552 1.07q-.454-.499-1.193-.935q-.74-.435-1.4-.577L13 4h-1.994l-.312 2.689q-.756.161-1.39.52q-.633.358-1.26.985L5.55 7.15l-.994 1.7l2.169 1.62q-.125.336-.175.73t-.05.82q0 .38.05.755t.156.73l-2.15 1.645l.994 1.7l2.475-1.05q.6.606 1.363.999t1.612.588m.973-7.887q-1.046 0-1.773.724T9.473 12q0 .467.16.89t.479.777q.16.183.366.206q.207.023.384-.136q.177-.154.181-.355t-.154-.347q-.208-.2-.312-.47T10.473 12q0-.625.438-1.063t1.062-.437q.289 0 .565.116q.276.117.476.324q.146.148.338.134q.192-.015.346-.191q.154-.177.134-.381t-.198-.364q-.311-.3-.753-.469t-.908-.169m5.643 8.962q-.625 0-1.197.191q-.571.191-1.057.56q-.287.22-.44.445t-.153.456q0 .136.106.242t.242.105h5.097q.105 0 .177-.095q.07-.097.07-.252q0-.231-.152-.456q-.153-.225-.44-.444q-.486-.37-1.057-.561t-1.196-.191m0-.846q.528 0 .899-.37q.37-.371.37-.9t-.37-.899t-.9-.37q-.528 0-.899.37q-.37.37-.37.9q0 .528.37.898t.9.37"})]})}function st(e){return s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",...e,children:[r("title",{children:"Entreprise"}),r("path",{fill:"currentColor",d:"M4.616 20q-.691 0-1.153-.462T3 18.384V8.616q0-.691.463-1.153T4.615 7H9V5.615q0-.69.463-1.153T10.616 4h2.769q.69 0 1.153.462T15 5.615V7h4.385q.69 0 1.152.463T21 8.616v9.769q0 .69-.463 1.153T19.385 20zm0-1h14.769q.23 0 .423-.192t.192-.424V8.616q0-.231-.192-.424T19.385 8H4.615q-.23 0-.423.192T4 8.616v9.769q0 .23.192.423t.423.192M10 7h4V5.615q0-.23-.192-.423T13.385 5h-2.77q-.23 0-.423.192T10 5.615zM4 19V8z"})]})}function at(e){return s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",...e,children:[r("title",{children:"Add"}),r("path",{fill:"currentColor",d:"M18 20v-3h-3v-2h3v-3h2v3h3v2h-3v3zM3 21q-.825 0-1.412-.587T1 19V5q0-.825.588-1.412T3 3h14q.825 0 1.413.588T19 5v5h-2V8H3v11h13v2z"})]})}function it(e){return s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",...e,children:[r("title",{children:"Dashboard"}),r("path",{fill:"currentColor",d:"M5.616 20q-.691 0-1.153-.462T4 18.384V5.616q0-.691.463-1.153T5.616 4h12.769q.69 0 1.153.463T20 5.616v12.769q0 .69-.462 1.153T18.384 20zm0-1H11.5V5H5.616q-.231 0-.424.192T5 5.616v12.769q0 .23.192.423t.423.192m6.885 0h5.885q.23 0 .423-.192t.192-.424V12h-6.5zm0-8H19V5.616q0-.231-.192-.424T18.384 5H12.5z"})]})}const ct=["admin","user","superadmin"],lt=e=>e?ct.includes(e):!1,S=C("user",{id:l("id").primaryKey(),name:h("first_name",{length:255}).notNull(),email:h("email",{length:255}).notNull().unique(),emailVerified:L("email_verified").notNull(),image:h("image",{length:255}),createdAt:g("created_at").notNull(),updatedAt:g("updated_at").notNull(),role:h("role",{length:255}).$type().default("user").notNull(),banned:L("banned"),banReason:l("ban_reason"),banExpires:g("ban_expires")});C("session",{id:l("id").primaryKey(),expiresAt:g("expires_at").notNull(),token:l("token").notNull().unique(),createdAt:g("created_at").notNull(),updatedAt:g("updated_at").notNull(),ipAddress:l("ip_address"),userAgent:l("user_agent"),userId:l("user_id").notNull().references(()=>S.id,{onDelete:"cascade"}),impersonatedBy:l("impersonated_by")});C("account",{id:l("id").primaryKey(),accountId:l("account_id").notNull(),providerId:l("provider_id").notNull(),userId:l("user_id").notNull().references(()=>S.id,{onDelete:"cascade"}),accessToken:l("access_token"),refreshToken:l("refresh_token"),idToken:l("id_token"),accessTokenExpiresAt:g("access_token_expires_at"),refreshTokenExpiresAt:g("refresh_token_expires_at"),scope:l("scope"),password:l("password"),createdAt:g("created_at").notNull(),updatedAt:g("updated_at").notNull()});C("verification",{id:l("id").primaryKey(),identifier:l("identifier").notNull(),value:l("value").notNull(),expiresAt:g("expires_at").notNull(),createdAt:g("created_at"),updatedAt:g("updated_at")});function pt(){const{data:e}=D.useSession(),n=e?.user.role;return{isAdmin:lt(n)&&(n==="admin"||n==="superadmin")}}const dt=[{label:"Qui sommes-nous ?",to:"/about"},{label:"FAQ",to:"/faq"},{label:"Sources",to:"/sources"},{label:"Contact",to:"/contact"}];function ut({session:e,queryClient:n}){return r("header",{className:"px-16 py-1.5 border-b border-gray-200 backdrop-blur-sm",children:s("nav",{className:"flex items-center justify-between",children:[s("ul",{className:"flex items-center gap-4",children:[r("li",{children:r(y,{to:"/",className:"text-sm font-light",children:"Annuaire TIH"})}),dt.map(o=>r("li",{children:r(y,{to:o.to,className:"text-sm font-light",activeProps:{className:"text-blue-700"},children:o.label})},o.to))]}),s("div",{className:"flex items-center gap-4",children:[r("a",{href:"https://linkedin.com/groups/13011531",target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-700 transition-colors",children:r(rt,{className:"size-5"})}),r(mt,{session:e}),r(ht,{session:e}),r(gt,{session:e,queryClient:n})]})]})})}function mt({session:e}){return e?null:r(y,{to:"/signup",className:"text-xs px-2 py-1 rounded-sm border border-gray-400",children:"Se référencer"})}function ht({session:e}){return e?null:r(y,{to:"/login",className:"text-xs px-2 py-1 rounded-sm border border-gray-400 cursor-pointer",children:"Login"})}function gt({session:e,queryClient:n}){const o=be(),[p,m]=Ne("light"),{isAdmin:_}=pt(),{mutate:f}=qe({mutationFn:()=>D.signOut(),onSuccess:()=>{n.clear(),O.success("Vous êtes déconnecté"),o.navigate({to:"/"})}});if(!e)return null;async function d(){f()}return s(c.Root,{children:[r(c.Trigger,{className:"rounded-full cursor-pointer",children:r(_t,{session:e})}),r(c.Portal,{children:s(c.Content,{sideOffset:2,align:"end",className:"bg-white border rounded-sm border-gray-200 min-w-64 overflow-hidden p-1 shadow-xs",children:[s("div",{className:"flex flex-col p-2",children:[r("span",{className:"text-sm",children:e.user.name}),r("span",{className:"truncate text-xs",children:e.user.email})]}),r(c.Separator,{className:"h-px bg-gray-200 my-1 -mx-1"}),s(c.Group,{children:[r(c.Item,{asChild:!0,children:s(y,{to:"/compte/entreprises/add",className:"outline-none flex items-center gap-2 px-2 py-1.5 data-highlighted:bg-gray-100 select-none",children:[r(at,{className:"size-4"}),r("span",{className:"text-xs",children:"Référencer"})]})}),r(c.Item,{asChild:!0,children:s(y,{to:"/compte/entreprises",className:"outline-none flex items-center gap-2 px-2 py-1.5 data-highlighted:bg-gray-100 select-none",children:[r(st,{className:"size-4"}),r("span",{className:"text-xs",children:"Mes entreprises"})]})}),r(c.Item,{asChild:!0,children:s(y,{to:"/compte/preferences",className:"outline-none flex items-center gap-2 px-2 py-1.5 data-highlighted:bg-gray-100 select-none",children:[r(ot,{className:"size-4"}),r("span",{className:"text-xs",children:"Mon compte"})]})}),_?r(c.Item,{asChild:!0,children:s(y,{to:"/admin/dashboard",className:"outline-none flex items-center gap-2 px-2 py-1.5 data-highlighted:bg-gray-100 select-none",children:[r(it,{className:"size-4"}),r("span",{className:"text-xs",children:"Admin dashboard"})]})}):null]}),r(c.Separator,{className:"h-px bg-gray-200 my-1 -mx-1"}),s(c.Group,{children:[r(c.Label,{className:"text-sm font-light px-2 py-1.5",children:"Thème"}),s(c.RadioGroup,{value:p,onValueChange:m,children:[s(c.RadioItem,{value:"light",className:"text-xs py-1.5 ps-8 select-none outline-none data-highlighted:bg-gray-100 relative flex items-center",children:[r(c.ItemIndicator,{className:"absolute start-2",children:r("span",{className:"size-2 rounded-full flex bg-gray-400"})}),"Light"]}),s(c.RadioItem,{value:"dark",className:"text-xs py-1.5 ps-8 select-none outline-none data-highlighted:bg-gray-100 relative flex items-center",children:[r(c.ItemIndicator,{className:"absolute start-2",children:r("span",{className:"size-2 rounded-full flex bg-gray-400"})}),"Dark"]}),s(c.RadioItem,{value:"system",className:"text-xs py-1.5 ps-8 select-none outline-none data-highlighted:bg-gray-100 relative flex items-center",children:[r(c.ItemIndicator,{className:"absolute start-2",children:r("span",{className:"size-2 rounded-full flex bg-gray-400"})}),"System"]})]})]}),r(c.Separator,{className:"h-px bg-gray-200 my-1 -mx-1"}),r(c.Group,{children:s(c.Item,{onSelect:()=>d(),className:"text-xs px-2 py-1.5 outline-none cursor-pointer flex items-center gap-2 data-highlighted:bg-gray-100",children:[r(nt,{className:"size-4"}),r("span",{children:"Se déconnecter"})]})})]})})]})}function _t({session:e}){if(!e)return null;const n=e.user.name?.split(" ").map(o=>o[0]).join("");return e.user.image?s(w.Root,{className:"size-6 rounded-full",children:[r(w.Image,{src:e.user.image,alt:e.user.name,className:"size-full rounded-full"}),r(w.Fallback,{className:"size-full leading-1",children:n})]}):r(w.Root,{className:"size-8 rounded-full border border-gray-200 flex",children:r(w.Fallback,{className:"size-full leading-1 text-xs grid place-items-center text-blue-500",children:n})})}const ft="/_build/assets/app-BvlQHg4K.css",bt=x("app_routes_root_tsx--getSession_createServerFn_handler","/_server"),yt=R({method:"GET"}).handler(bt),Rt=T({queryKey:["user","session"],queryFn:({signal:e})=>yt({signal:e})}),u=ye()({head:()=>({meta:[{charSet:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{title:"Annuaire TIH"}],links:[{rel:"stylesheet",href:ft}]}),beforeLoad:async({context:e})=>({session:await e.queryClient.fetchQuery(Rt)}),notFoundComponent:()=>r("div",{children:"Not found"}),component:xt});function xt(){return r(vt,{children:r(Re,{})})}function vt({children:e}){const{session:n,queryClient:o}=u.useRouteContext();return s("html",{lang:"fr",children:[r("head",{children:r(xe,{})}),s("body",{className:"font-sans text-gray-700 isolate",children:[r(ut,{session:n,queryClient:o}),e,r(Ie,{}),r(ze,{buttonPosition:"bottom-left"}),r(ve,{})]})]})}const $t=()=>import("./route-CjDoFr0g.js"),Q=i("/_protected")({component:a($t,"component",()=>Q.ssr),beforeLoad:async({context:e})=>{if(!e.session?.user)throw $({to:"/login"})}}),qt=()=>import("./route-BCnNEv89.js"),B=i("/_admin")({beforeLoad:({context:e})=>{if(!e.session?.user)throw $({to:"/login"});const n=e.session.user.role;if(n!=="admin"&&n!=="superadmin")throw $({to:"/login"})},component:a(qt,"component",()=>B.ssr)}),wt=x("app_lib_api_categories_ts--getCategories_createServerFn_handler","/_server"),Ct=R({method:"GET"}).handler(wt),W=T({queryKey:["categories"],queryFn:()=>Ct(),staleTime:1e3*60*60*24}),Pt=()=>import("./index-BEVw6ugx.js"),K=i("/_public/")({component:a(Pt,"component",()=>K.ssr),loader:async({context:e})=>{await e.queryClient.ensureQueryData(W)}}),Nt=()=>import("./sources-CPVzUGRn.js"),G=i("/_public/sources")({component:a(Nt,"component",()=>G.ssr)}),St=()=>import("./partner-eGLwnrmV.js"),U=i("/_public/partner")({component:a(St,"component",()=>U.ssr)}),Tt=()=>import("./faq-BE3u91NJ.js"),J=i("/_public/faq")({component:a(Tt,"component",()=>J.ssr)}),It=()=>import("./contact-D_SEO6t2.js"),Y=i("/_public/contact")({component:a(It,"component",()=>Y.ssr)}),zt=()=>import("./about-CzFvV-7i.js"),X=i("/_public/about")({component:a(zt,"component",()=>X.ssr)}),Ft=()=>import("./reference-hrPmoKVH.js"),Z=i("/_protected/reference")({component:a(Ft,"component",()=>Z.ssr)}),Lt=()=>import("./signup-DUsuYvOo.js"),At=t.object({email:t.pipe(t.string(),t.nonEmpty("Veuillez entrer votre email"),t.email("Veuillez entrer un email valide")),password:t.pipe(t.string(),t.minLength(8,"Le mot de passe doit contenir au moins 8 caractères"),t.maxLength(100,"Le mot de passe doit contenir au plus 100 caractères")),firstName:t.pipe(t.string(),t.nonEmpty("Veuillez entrer votre prénom"),t.maxLength(100,"Le prénom doit contenir au plus 100 caractères")),lastName:t.pipe(t.string(),t.nonEmpty("Veuillez entrer votre nom"),t.maxLength(100,"Le nom doit contenir au plus 100 caractères"))}),Vt=x("app_routes_auth_signup_tsx--signupFn_createServerFn_handler","/_server"),cn=R().validator(e=>t.parse(At,e)).handler(Vt),ee=i("/_auth/signup")({component:a(Lt,"component",()=>ee.ssr),beforeLoad:async({context:e})=>{if(e.session?.user)throw $({to:"/compte/entreprises"})}}),Et=()=>import("./reset-password-BTYIFHqi.js"),te=i("/_auth/reset-password")({component:a(Et,"component",()=>te.ssr)}),kt=()=>import("./login-CGV7q78E.js"),jt=t.object({email:t.pipe(t.string(),t.email()),password:t.pipe(t.string(),t.minLength(8))}),Mt=x("app_routes_auth_login_tsx--loginFn_createServerFn_handler","/_server"),ln=R({method:"POST"}).validator(e=>t.parse(jt,e)).handler(Mt),re=i("/_auth/login")({component:a(kt,"component",()=>re.ssr),beforeLoad:async({context:e})=>{if(e.session?.user)throw $({to:"/compte/entreprises"})}}),Ht=()=>import("./forgot-password-zixOiwS0.js"),ne=i("/_auth/forgot-password")({component:a(Ht,"component",()=>ne.ssr)}),Ot=x("app_lib_api_user_ts--getUserCompanies_createServerFn_handler","/_server"),Dt=R({method:"GET"}).handler(Ot),A=T({queryKey:["user","companies"],queryFn:()=>Dt(),staleTime:1e3*60*60*24}),Qt=()=>import("./route-CWvq02Wb.js"),oe=i("/_protected/_compte")({component:a(Qt,"component",()=>oe.ssr),loader:async({context:e})=>e.queryClient.ensureQueryData(A)||[]}),Bt=()=>import("./index-CSm5gLhj.js"),se=i("/_public/entrepreneurs/")({component:a(Bt,"component",()=>se.ssr)}),Wt=()=>import("./index-DDQFu39X.js"),ae=i("/_public/categories/")({component:a(Wt,"component",()=>ae.ssr)});C("companies",{id:Se("id").primaryKey().defaultRandom(),status:h("status").$type().notNull().default("pending"),created_at:g("created_at").notNull().defaultNow(),updated_at:g("updated_at").notNull().defaultNow(),created_by:l("created_by").references(()=>S.id,{onDelete:"cascade"}).notNull(),user_id:l("user_id").references(()=>S.id,{onDelete:"cascade"}).notNull(),name:h("name",{length:255}).notNull().unique(),siret:h("siret",{length:14}).notNull(),business_owner:h("business_owner",{length:255}),description:h("description",{length:1500}),website:h("website",{length:255}),location:h("location",{length:255}),service_area:h("service_area",{length:255}),subdomain:h("subdomain",{length:100}),work_mode:h("work_mode").$type(),email:h("email",{length:255}),phone:h("phone",{length:24}),rqth:L("rqth").notNull().default(!1),logo:F("logo").$type(),gallery:F("gallery").$type(),social_media:F("social_media").$type().notNull().default({facebook:"",calendly:"",linkedin:"",instagram:""})},e=>[Te("company_search_index").using("gin",De`to_tsvector('french', ${e.name} || ' ' || ${e.subdomain} || ' ' || ${e.description})`)]);const Kt=["remote","hybrid","onsite","not_specified"],Gt=t.object({name:t.pipe(t.string(),t.nonEmpty("Veuillez entrer le nom de l'entreprise"),t.maxLength(255,"Le nom de l'entreprise doit contenir au plus 255 caractères")),siret:t.pipe(t.string(),t.nonEmpty("Veuillez entrer le siret de l'entreprise"),t.length(14,"Le siret de l'entreprise doit contenir 14 caractères")),categories:t.pipe(t.array(t.string()),t.minLength(1,"Veuillez sélectionner au moins une catégorie"),t.maxLength(3,"Veuillez sélectionner au plus 3 catégories")),business_owner:t.union([t.literal(""),t.pipe(t.string(),t.nonEmpty("Veuillez entrer le nom du responsable de l'entreprise"),t.maxLength(255,"Le nom du responsable de l'entreprise doit contenir au plus 255 caractères"))]),description:t.union([t.literal(""),t.pipe(t.string(),t.maxLength(1500,"La description de l'entreprise doit contenir au plus 1500 caractères"))]),website:t.union([t.literal(""),t.pipe(t.string(),t.url("Veuillez entrer une url valide"))]),location:t.optional(t.union([t.literal(""),t.pipe(t.string(),t.maxLength(255,"La localisation doit contenir au plus 255 caractères"))])),service_area:t.union([t.literal(""),t.pipe(t.string(),t.maxLength(255,"La zone de service doit contenir au plus 255 caractères"))]),subdomain:t.union([t.literal(""),t.pipe(t.string(),t.maxLength(100,"Le sous-domaine doit contenir au plus 100 caractères"))]),email:t.union([t.literal(""),t.pipe(t.string(),t.email("Veuillez entrer une adresse email valide"))]),phone:t.union([t.literal(""),t.pipe(t.string(),t.maxLength(24,"Le numéro de téléphone doit contenir au plus 24 caractères"))]),work_mode:t.nullable(t.picklist(Kt)),rqth:t.optional(t.boolean()),logo:t.optional(t.pipe(t.instance(File),t.mimeType(["image/png","image/jpeg","image/jpg","image/webp"],"Veuillez entrer un fichier valide pour le logo"),t.maxSize(1024*1024*3,"La taille du fichier doit être inférieure à 3MB"))),gallery:t.optional(t.pipe(t.array(t.pipe(t.instance(File),t.mimeType(["image/png","image/jpeg","image/jpg","image/webp"],"Veuillez entrer un fichier valide pour la galerie"),t.maxSize(1024*1024*2,"La taille du fichier doit être inférieure à 2MB"))),t.maxLength(2,"Veuillez entrer au plus 2 images"))),facebook:t.union([t.literal(""),t.pipe(t.string(),t.url("Veuillez entrer une url valide"),t.startsWith("https://www.facebook.com/","Veuillez entrer une url facebook valide"))]),instagram:t.union([t.literal(""),t.pipe(t.string(),t.url("Veuillez entrer une url valide"),t.startsWith("https://www.instagram.com/","Veuillez entrer une url instagram valide"))]),linkedin:t.union([t.literal(""),t.pipe(t.string(),t.url("Veuillez entrer une url valide"),t.startsWith("https://www.linkedin.com/company/","Veuillez entrer une url linkedin valide"))]),calendly:t.union([t.literal(""),t.pipe(t.string(),t.url("Veuillez entrer une url valide"),t.startsWith("https://calendly.com/","Veuillez entrer une url calendly valide"))])}),Ut=x("app_lib_api_companies_ts--addCompany_createServerFn_handler","/_server"),pn=R({method:"POST"}).validator(e=>{const n=Qe(e,{files:["logo","gallery"],arrays:["categories","gallery"],booleans:["rqth"]});return t.parse(Gt,n)}).handler(Ut),Jt=x("app_lib_api_companies_ts--deleteCompany_createServerFn_handler","/_server"),dn=R({method:"POST"}).validator(e=>e).handler(Jt),Yt=x("app_lib_api_companies_ts--getCompany_createServerFn_handler","/_server"),Xt=R({method:"GET"}).validator(e=>e).handler(Yt);function Zt(e){return T({queryKey:["company",e],queryFn:()=>Xt({data:e}),staleTime:1e3*60*60*24})}const er=()=>import("./_name-BD5xRgOT.js"),tr=()=>import("./_name-RW2G6P8z.js"),rr=()=>import("./_name-soSzPmJt.js"),nr=t.object({id:t.string()}),ie=i("/_public/entreprises/$name")({component:a(rr,"component",()=>ie.ssr),pendingComponent:a(tr,"pendingComponent"),errorComponent:a(er,"errorComponent"),validateSearch:nr,loaderDeps:({search:{id:e}})=>({id:e}),loader:async({context:e,deps:{id:n}})=>{const o=await e.queryClient.ensureQueryData(Zt(n)),p=e.session;return{company:o,session:p}}}),or=()=>import("./_id-BXU5h-k8.js"),ce=i("/_public/categories/$id")({component:a(or,"component",()=>ce.ssr)}),sr=()=>import("./dashboard-DKZIHeQn.js"),le=i("/_admin/admin/dashboard")({component:a(sr,"component",()=>le.ssr)}),ar=()=>import("./preferences-Dr09Y8h4.js"),pe=i("/_protected/_compte/compte/preferences")({component:a(ar,"component",()=>pe.ssr)}),ir=()=>import("./index-Bra5vMkb.js"),de=i("/_protected/_compte/compte/entreprises/")({loader:async({context:e})=>await e.queryClient.ensureQueryData(A),component:a(ir,"component",()=>de.ssr)}),cr=()=>import("./preview-B1J1KjWU.js"),ue=i("/_protected/_compte/compte/entreprises/preview")({component:a(cr,"component",()=>ue.ssr)}),lr=()=>import("./add-E_Tm_DAB.js"),me=i("/_protected/_compte/compte/entreprises/add")({component:a(lr,"component",()=>me.ssr),beforeLoad:async({context:e})=>{const n=await e.queryClient.ensureQueryData(A);if(n&&n?.length>=3)throw O.error("Vous ne pouvez pas créer plus de 3 entreprises"),$({to:"/compte/entreprises"})},loader:({context:e})=>e.queryClient.ensureQueryData(W)}),pr=()=>import("./edit-BUeGVjF3.js"),he=i("/_protected/_compte/compte/entreprises/$id/edit")({component:a(pr,"component",()=>he.ssr)}),V=Q.update({id:"/_protected",getParentRoute:()=>u}),ge=B.update({id:"/_admin",getParentRoute:()=>u}),dr=K.update({id:"/_public/",path:"/",getParentRoute:()=>u}),ur=G.update({id:"/_public/sources",path:"/sources",getParentRoute:()=>u}),mr=U.update({id:"/_public/partner",path:"/partner",getParentRoute:()=>u}),hr=J.update({id:"/_public/faq",path:"/faq",getParentRoute:()=>u}),gr=Y.update({id:"/_public/contact",path:"/contact",getParentRoute:()=>u}),_r=X.update({id:"/_public/about",path:"/about",getParentRoute:()=>u}),fr=Z.update({id:"/reference",path:"/reference",getParentRoute:()=>V}),br=ee.update({id:"/_auth/signup",path:"/signup",getParentRoute:()=>u}),yr=te.update({id:"/_auth/reset-password",path:"/reset-password",getParentRoute:()=>u}),Rr=re.update({id:"/_auth/login",path:"/login",getParentRoute:()=>u}),xr=ne.update({id:"/_auth/forgot-password",path:"/forgot-password",getParentRoute:()=>u}),q=oe.update({id:"/_compte",getParentRoute:()=>V}),vr=se.update({id:"/_public/entrepreneurs/",path:"/entrepreneurs/",getParentRoute:()=>u}),$r=ae.update({id:"/_public/categories/",path:"/categories/",getParentRoute:()=>u}),qr=ie.update({id:"/_public/entreprises/$name",path:"/entreprises/$name",getParentRoute:()=>u}),wr=ce.update({id:"/_public/categories/$id",path:"/categories/$id",getParentRoute:()=>u}),Cr=le.update({id:"/admin/dashboard",path:"/admin/dashboard",getParentRoute:()=>ge}),Pr=pe.update({id:"/compte/preferences",path:"/compte/preferences",getParentRoute:()=>q}),Nr=de.update({id:"/compte/entreprises/",path:"/compte/entreprises/",getParentRoute:()=>q}),Sr=ue.update({id:"/compte/entreprises/preview",path:"/compte/entreprises/preview",getParentRoute:()=>q}),Tr=me.update({id:"/compte/entreprises/add",path:"/compte/entreprises/add",getParentRoute:()=>q}),Ir=he.update({id:"/compte/entreprises/$id/edit",path:"/compte/entreprises/$id/edit",getParentRoute:()=>q}),zr={AdminAdminDashboardRoute:Cr},Fr=ge._addFileChildren(zr),Lr={ProtectedCompteComptePreferencesRoute:Pr,ProtectedCompteCompteEntreprisesAddRoute:Tr,ProtectedCompteCompteEntreprisesPreviewRoute:Sr,ProtectedCompteCompteEntreprisesIndexRoute:Nr,ProtectedCompteCompteEntreprisesIdEditRoute:Ir},Ar=q._addFileChildren(Lr),Vr={ProtectedCompteRouteRoute:Ar,ProtectedReferenceRoute:fr},Er=V._addFileChildren(Vr),kr={AdminRouteRoute:Fr,ProtectedRouteRoute:Er,AuthForgotPasswordRoute:xr,AuthLoginRoute:Rr,AuthResetPasswordRoute:yr,AuthSignupRoute:br,PublicAboutRoute:_r,PublicContactRoute:gr,PublicFaqRoute:hr,PublicPartnerRoute:mr,PublicSourcesRoute:ur,PublicIndexRoute:dr,PublicCategoriesIdRoute:wr,PublicEntreprisesNameRoute:qr,PublicCategoriesIndexRoute:$r,PublicEntrepreneursIndexRoute:vr},jr=u._addFileChildren(kr)._addFileTypes(),H=new we;function Mr(){return Be($e({routeTree:jr,context:{queryClient:H},scrollRestoration:!0}),H)}const un=Oe({createRouter:Mr,getRouterManifest:Xe})(Ge);export{Gt as A,rt as L,ie as R,Zt as a,ce as b,W as c,de as d,dn as e,me as f,pn as g,he as h,un as i,ln as l,cn as s,A as u};
