import{d as e,l as r}from"./index-8Htcofqc.mjs";import{n as o}from"./categories-B1A9pQfz.mjs";import{_ as t}from"./companies-l5PKOmvG.mjs";import{d as i}from"./company-categories-CgBd9Wjc.mjs";import{c as s,f as a,a5 as m,a6 as n}from"../nitro/nitro.mjs";import"../_/main.mjs";import"node:events";import"node:buffer";import"node:stream";import"../_/server.mjs";import"node:path";import"./auth-BsEI6_U5.mjs";import"node:net";import"node:process";import"node:timers";import"node:async_hooks";import"node:url";import"node:stream/web";import"node:crypto";const p=e("app_lib_api_users_queries_get-user-companies_ts--getUserCompanies_createServerFn_handler","/_server",((e,r)=>d.__executeServer(e,r))),d=s({method:"GET"}).validator((e=>e)).handler(p,(async({data:e})=>{const s=await r.select({id:t.id,name:t.name,description:t.description,status:t.status,siret:t.siret,business_owner:t.business_owner,website:t.website,service_area:t.service_area,subdomain:t.subdomain,email:t.email,phone:t.phone,work_mode:t.work_mode,rqth:t.rqth,logo:t.logo,gallery:t.gallery,slug:t.slug}).from(t).where(a(t.user_id,e)).orderBy(m(t.created_at)),p=await r.select({company_id:i.company_id,category_id:o.id,category_name:o.name}).from(i).leftJoin(o,a(o.id,i.category_id)).where(n(i.company_id,s.map((e=>e.id))));return s.map((e=>({...e,categories:p.filter((r=>r.company_id===e.id))})))}));export{p as getUserCompanies_createServerFn_handler};
//# sourceMappingURL=get-user-companies-bX9WWYSd.mjs.map
