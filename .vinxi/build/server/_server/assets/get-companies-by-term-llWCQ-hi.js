import{and as s,sql as m,eq as i}from"drizzle-orm";import{c as n,d as p}from"./index-8Htcofqc.js";import{c as r}from"./companies-l5PKOmvG.js";import{createServerFn as c}from"@tanstack/start-client-core";import"tiny-invariant";import"drizzle-orm/postgres-js";import"postgres";import"dotenv";import"drizzle-orm/pg-core";import"./auth-BsEI6_U5.js";import"nanoid";const _=n("app_lib_api_companies_queries_get-companies-by-term_ts--getCompaniesByTerm_createServerFn_handler","/_server",(e,o)=>d.__executeServer(e,o)),d=c({method:"GET"}).validator(e=>e).handler(_,async({data:e})=>{const a=e.split(/\s+/).filter(t=>t.length>0).map(t=>`${t}:*`).join(" & ");return await p.select().from(r).where(s(m`to_tsvector('french', ${r.name} || ' ' || ${r.subdomain} || ' ' || ${r.description}) @@ to_tsquery('french', ${a})`,i(r.status,"active")))});export{_ as getCompaniesByTerm_createServerFn_handler};
