import{t as e,c as s,j as r,N as a,V as t,Q as o,U as n,Y as i,Z as m,$ as l,a0 as c,a1 as d,a2 as p,W as u,X as x}from"../nitro/nitro.mjs";import{m as f,l as j}from"./label-DSAYOjK5.mjs";import{A as h,R as g}from"../_/index.mjs";import{E as v}from"./auth.server-DtTByMvE.mjs";import{d as b}from"./index-8Htcofqc.mjs";import{d as N}from"./cn-CR1u50KS.mjs";import"node:net";import"node:stream";import"node:events";import"node:process";import"node:buffer";import"node:timers";import"node:async_hooks";import"node:url";import"node:stream/web";import"node:crypto";import"./auth-BsEI6_U5.mjs";import"../_/main.mjs";import"../_/server.mjs";import"node:path";const _=t({email:i(c(),l("Veuillez entrer votre email"),p("Veuillez entrer un email valide")),password:i(c(),d(8,"Le mot de passe doit contenir au moins 8 caractères"),m(100,"Le mot de passe doit contenir au plus 100 caractères")),firstName:i(c(),l("Veuillez entrer votre prénom"),m(100,"Le prénom doit contenir au plus 100 caractères")),lastName:i(c(),l("Veuillez entrer votre nom"),m(100,"Le nom doit contenir au plus 100 caractères"))}),w=b("app_routes_auth_signup_tsx--signupFn_createServerFn_handler","/_server",((e,s)=>y.__executeServer(e,s))),y=s().validator((e=>a(_,e))).handler(w,(async({data:e})=>{try{await v.api.signUpEmail({body:{email:e.email,password:e.password,name:`${e.firstName} ${e.lastName}`}})}catch(e){if(e instanceof h)return{status:"error",message:e.message}}const s=new g(o.env.RESEND_API_KEY),{data:a,error:t}=await s.emails.send({from:"Acme <onboarding@resend.dev>",to:"cedgourville@gmail.com",subject:"Bienvenue sur l'application de gestion de projet",react:r.jsxs("div",{children:[r.jsx("h1",{children:"Bienvenue sur l'application de gestion de projet"}),r.jsx("p",{children:"Votre compte a été créé avec succès"})]})});throw t&&console.error(t),console.log(a),n({to:"/compte/entreprises"})})),S=u("/(auth)/signup")({component:x((()=>Promise.resolve().then((()=>q))),"component",(()=>S.ssr)),beforeLoad:async({context:e})=>{if(e.user)throw n({to:"/compte/entreprises"})}}),E=function(){const{mutate:s,isPending:a}=e({mutationFn:N(y)});return r.jsxs("main",{className:"py-12",children:[r.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"Créer un compte"}),r.jsx("div",{className:"max-w-lg mx-auto border border-gray-200 p-6 rounded-sm shadow-sm",children:r.jsxs("form",{className:"flex flex-col gap-6",onSubmit:function(e){e.preventDefault();const r=new FormData(e.target);s({data:{email:r.get("email"),password:r.get("password"),firstName:r.get("firstName"),lastName:r.get("lastName")}})},children:[r.jsxs("div",{className:"grid gap-4",children:[r.jsxs(f,{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"Nom*"}),r.jsx(j,{name:"lastName",type:"text",required:!0})]}),r.jsxs(f,{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"Prénom*"}),r.jsx(j,{name:"firstName",type:"text",required:!0})]}),r.jsxs(f,{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"Email*"}),r.jsx(j,{name:"email",type:"email",required:!0})]}),r.jsxs(f,{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"Mot de passe*"}),r.jsx(j,{name:"password",type:"password",required:!0})]}),r.jsxs(f,{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"Confirmation du mot de passe*"}),r.jsx(j,{name:"confirmPassword",type:"password",required:!0})]})]}),r.jsx("button",{type:"submit",className:"border border-blue-400 text-blue-400 hover:bg-blue-400 hover:text-white transition-colors p-2 rounded-sm font-medium text-sm",disabled:a,children:a?"Création en cours...":"S'inscrire"})]})})]})},q=Object.freeze(Object.defineProperty({__proto__:null,component:E},Symbol.toStringTag,{value:"Module"}));export{E as component};
//# sourceMappingURL=signup-BBujVTuF.mjs.map
