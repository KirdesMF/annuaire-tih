import{jsx as t,jsxs as s}from"react/jsx-runtime";import{useMutation as d}from"@tanstack/react-query";import{toast as m}from"sonner";import{L as u,I as f}from"./label-DSAYOjK5.js";import{createFileRoute as b,lazyRouteComponent as h}from"@tanstack/react-router";import*as r from"valibot";import{a as v}from"./auth.server-DtTByMvE.js";import{createServerFn as g}from"@tanstack/start-client-core";import{c as x}from"./index-8Htcofqc.js";import{getWebRequest as _}from"@tanstack/start-server-core";import{u as S}from"./cn-CR1u50KS.js";import"better-auth";import"better-auth/adapters/drizzle";import"better-auth/plugins";import"./auth-BsEI6_U5.js";import"drizzle-orm/pg-core";import"better-auth/react-start";import"resend";import"tiny-invariant";import"drizzle-orm/postgres-js";import"postgres";import"dotenv";import"@tanstack/router-core";import"clsx";import"tailwind-merge";const w=()=>Promise.resolve().then(()=>E),F=r.object({email:r.pipe(r.string(),r.email("Veuillez entrer une adresse email valide"))}),y=x("app_routes_auth_forgot-password_tsx--forgotPasswordFn_createServerFn_handler","/_server",(e,o)=>i.__executeServer(e,o)),i=g({method:"POST"}).validator(e=>{const o=Object.fromEntries(e.entries());return r.parse(F,o)}).handler(y,async({data:e})=>{await v.api.forgetPassword({body:{email:e.email,redirectTo:"/reset-password"},headers:_()?.headers})}),P=b("/(auth)/forgot-password")({component:h(w,"component",()=>P.ssr)}),j=function(){const{mutate:o,isPending:a}=d({mutationFn:S(i)});function p(n){n.preventDefault();const l=new FormData(n.target);o({data:l},{onSuccess:()=>{m.success("Un email vous a été envoyé pour réinitialiser votre mot de passe")},onError:c=>{m.error(c.message)}})}return t("main",{children:s("div",{className:"container px-4 py-12",children:[t("h1",{className:"text-2xl font-bold mb-6",children:"Mot de passe oublié"}),s("form",{className:"flex flex-col gap-6",onSubmit:p,children:[s(u,{className:"flex flex-col gap-2",children:["Email *",t(f,{type:"email",name:"email",placeholder:"Email"})]}),t("button",{type:"submit",className:"border border-blue-400 text-blue-400 hover:bg-blue-400 hover:text-white transition-colors p-2 rounded-sm font-medium text-sm",disabled:a,children:a?"Envoi en cours...":"Envoyer"})]})]})})},E=Object.freeze(Object.defineProperty({__proto__:null,component:j},Symbol.toStringTag,{value:"Module"}));export{j as component};
