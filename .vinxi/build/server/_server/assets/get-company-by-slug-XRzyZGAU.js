import{eq as t}from"drizzle-orm";import{c as n,d as m}from"./index-8Htcofqc.js";import{c}from"./categories-B1A9pQfz.js";import{c as i}from"./companies-l5PKOmvG.js";import{c as a}from"./company-categories-CgBd9Wjc.js";import{createServerFn as s}from"@tanstack/start-client-core";import"tiny-invariant";import"drizzle-orm/postgres-js";import"postgres";import"dotenv";import"drizzle-orm/pg-core";import"nanoid";import"./auth-BsEI6_U5.js";const l=n("app_lib_api_companies_queries_get-company-by-slug_ts--getCompanyBySlug_createServerFn_handler","/_server",(r,e)=>g.__executeServer(r,e)),g=s({method:"GET"}).validator(r=>r).handler(l,async({data:r})=>{try{const e=await m.select().from(i).where(t(i.slug,r)).then(o=>o[0]),p=await m.select().from(a).leftJoin(c,t(c.id,a.category_id)).where(t(a.company_id,e.id));return{...e,categories:p.map(o=>o.categories)}}catch(e){throw console.error(e),e}});export{l as getCompanyBySlug_createServerFn_handler};
