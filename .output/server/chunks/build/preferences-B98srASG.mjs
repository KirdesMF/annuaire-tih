import{aX as e,r as s,aY as a,t as r,aI as t,c as n,j as l,aW as o,aZ as i,a_ as d,aL as m,N as c,V as x,F as u,J as p,K as h,M as j,a3 as f,a0 as g}from"../nitro/nitro.mjs";import{p as y}from"./input-DBDjV_JP.mjs";import{l as b}from"./label-DH_rTUQU.mjs";import{m as N,g as v,p as w,d as _}from"./dialog-D12vissF.mjs";import"node:net";import"node:stream";import"node:events";import"node:process";import"node:buffer";import"node:timers";import"node:async_hooks";import"node:url";import"node:stream/web";import"node:crypto";import"./close--xrcrNXd.mjs";const S=m("app_lib_api_users_mutations_delete-user_ts--deleteUser_createServerFn_handler","/_server"),k=n({method:"POST"}).validator((e=>e)).handler(S),F=x({email:g()}),P=m("app_lib_api_users_mutations_update-user-email_ts--updateUserEmailFn_createServerFn_handler","/_server"),V=n({method:"POST"}).validator((e=>c(F,{email:e.get("email")}))).handler(P),M=x({name:f(g())}),T=m("app_lib_api_users_mutations_update-user-infos_ts--updateUserInfos_createServerFn_handler","/_server"),z=n({method:"POST"}).validator((e=>c(M,{name:e.get("name"),image:e.get("image")}))).handler(T),D=x({password:g(),newPassword:g()}),C=m("app_lib_api_users_mutations_update-user-password_ts--updateUserPasswordFn_createServerFn_handler","/_server"),U=n({method:"POST"}).validator((e=>c(D,{password:e.get("password"),newPassword:e.get("newPassword")}))).handler(C);function re({user:e}){var s;if(!e)return null;const a=null==(s=e.name)?void 0:s.split(" ").map((e=>e[0])).join("");return e.image?l.jsxs(u,{className:"size-16 rounded-full",children:[l.jsx(p,{src:e.image,alt:e.name,className:"size-full rounded-full"}),l.jsx(h,{className:"size-full leading-1",children:a})]}):l.jsx(u,{className:"size-16 rounded-full border border-gray-200 flex",children:l.jsx(h,{className:"size-full leading-1 text-2xl grid place-items-center text-blue-500",children:a})})}const Ie=function(){const n=e.useRouteContext(),[m,c]=s.useState(!1),[x,u]=s.useState(!1),{theme:p,onThemeLight:h,onThemeDark:f,onThemeSystem:g,setTheme:S}=a(),{mutate:F,isPending:P}=r({mutationFn:t(k)}),{mutate:M,isPending:T}=r({mutationFn:t(z)}),{mutate:D,isPending:C}=r({mutationFn:t(U)}),{mutate:q,isPending:O}=r({mutationFn:t(V)});return l.jsxs("div",{className:"container px-4 py-6",children:[l.jsxs("header",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Préférences utilisateur"}),l.jsx("p",{children:"Modifiez vos préférences utilisateur pour personnaliser votre expérience sur le site."})]}),l.jsx(o,{className:"my-8 h-px bg-gray-300"}),l.jsxs("div",{className:"grid gap-8",children:[l.jsxs("article",{className:"border border-gray-300 p-4 rounded-sm flex justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("h2",{className:"text-xl font-bold",children:"Avatar"}),l.jsx("p",{className:"text-sm text-pretty",children:"Votre avatar est votre image de profil. Vous pouvez le modifier en cliquant sur l'avatar."})]}),l.jsx("div",{className:"flex justify-center px-4",children:l.jsx(re,{user:n.user})})]}),l.jsx("article",{className:"border border-gray-300 p-4 rounded-sm",children:l.jsxs("form",{onSubmit:function(e){e.preventDefault();const s=new FormData(e.currentTarget);M({data:s},{onSuccess:async()=>{await n.queryClient.invalidateQueries({queryKey:["user","session"],refetchType:"all"}),j.success("Nom et prénom modifié avec succès")}})},children:[l.jsxs("div",{className:"flex flex-col gap-2 py-4",children:[l.jsx("h2",{className:"text-xl font-bold",children:"Nom et prénom"}),l.jsx("p",{className:"text-sm text-pretty",children:"Votre nom et prénom sont utilisés pour identifier votre compte. Vous pouvez le modifier en cliquant sur le bouton ci-dessous."}),l.jsxs(b,{children:[l.jsx("span",{className:"sr-only",children:"Nom et prénom"}),l.jsx(y,{name:"name",defaultValue:n.user.name,className:"max-w-1/3 text-sm"})]})]}),l.jsx(o,{className:"my-4 -mx-4 h-px bg-gray-300"}),l.jsx("div",{className:"flex gap-2 justify-end",children:l.jsx("button",{type:"submit",className:"bg-gray-500 text-white px-4 py-2 rounded-sm text-xs",disabled:T,children:T?"Modification en cours...":"Modifier mon nom et prénom"})})]})}),l.jsx("article",{className:"border border-gray-300 p-4 rounded-sm",children:l.jsxs("form",{onSubmit:function(e){e.preventDefault();const s=new FormData(e.currentTarget);q({data:s},{onSuccess:()=>{j.success("Email modifié avec succès")}})},children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("h2",{className:"text-xl font-bold",children:"Email"}),l.jsx("p",{className:"text-sm text-pretty",children:"Un email de confirmation vous sera envoyé afin de vérifier votre identité"}),l.jsxs(b,{children:[l.jsx("span",{className:"sr-only",children:"Email"}),l.jsx(y,{name:"email",defaultValue:n.user.email,className:"max-w-1/3 text-sm"})]})]}),l.jsx(o,{className:"my-4 -mx-4 h-px bg-gray-300"}),l.jsx("div",{className:"flex gap-2 justify-end",children:l.jsx("button",{type:"submit",className:"bg-gray-500 text-white px-4 py-2 rounded-sm text-xs",children:O?"Modification en cours...":"Modifier mon email"})})]})}),l.jsxs("article",{className:"border border-gray-300 p-4 rounded-sm",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("h2",{className:"text-xl font-bold",children:"Mot de passe"}),l.jsx("p",{className:"text-sm text-pretty",children:"Votre mot de passe est utilisé pour accéder à votre compte. Vous pouvez le modifier en cliquant sur le bouton ci-dessous."}),l.jsxs(b,{children:[l.jsx("span",{className:"sr-only",children:"Mot de passe"}),l.jsx(y,{type:"password",name:"password",defaultValue:"password",className:"max-w-1/3 text-sm"})]})]}),l.jsx(o,{className:"my-4 -mx-4 h-px bg-gray-300"}),l.jsxs("div",{className:"flex gap-2 justify-end",children:[l.jsx("button",{type:"button",className:"bg-gray-500 text-white px-4 py-2 rounded-sm text-xs",onClick:()=>u(!0),children:"Modifier mon mot de passe"}),l.jsx(N,{open:x,onOpenChange:u,children:l.jsxs(v,{children:[l.jsx(w,{children:"Modifier mon mot de passe"}),l.jsx(o,{className:"my-4 -mx-4 h-px bg-gray-300"}),l.jsx(_,{className:"mb-6",children:"Veuillez entrer votre mot de passe actuel et votre nouveau mot de passe."}),l.jsxs("form",{onSubmit:function(e){e.preventDefault();const s=new FormData(e.currentTarget);D({data:s},{onSuccess:()=>{u(!1),j.success("Mot de passe modifié avec succès")}})},children:[l.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[l.jsxs(b,{className:"flex flex-col gap-2",children:[l.jsx("span",{className:"text-sm",children:"Mot de passe actuel"}),l.jsx(y,{type:"password",name:"password",className:"text-sm"})]}),l.jsxs(b,{className:"flex flex-col gap-2",children:[l.jsx("span",{className:"text-sm",children:"Nouveau mot de passe"}),l.jsx(y,{type:"password",name:"newPassword",className:"text-sm"})]})]}),l.jsxs("div",{className:"flex gap-2 justify-end",children:[l.jsx("button",{type:"button",className:"bg-gray-500 text-white px-4 py-2 rounded-sm text-xs",onClick:()=>u(!1),children:"Annuler"}),l.jsx("button",{type:"submit",className:"bg-gray-500 text-white px-4 py-2 rounded-sm text-xs",children:C?"Modification en cours...":"Modifier mon mot de passe"})]})]})]})})]})]}),l.jsx("article",{className:"border border-gray-300 p-4 rounded-sm",children:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("h2",{className:"text-xl font-bold",children:"Thème"}),l.jsx("p",{className:"text-sm text-pretty",children:"Vous pouvez modifier le thème de votre site en selectionnant une option ci-dessous."}),l.jsxs(i,{defaultValue:null!=p?p:"system",onValueChange:e=>function(e){const s={light:h,dark:f,system:g};S(e),s[e]()}(e),className:"flex gap-2",children:[l.jsx(d,{value:"light",className:"bg-gray-500 text-white px-4 py-2 rounded-sm text-xs cursor-pointer dark:bg-gray-900 dark:text-white dark:border dark:border-gray-700",children:"Light"}),l.jsx(d,{value:"dark",className:"bg-gray-500 text-white px-4 py-2 rounded-sm text-xs cursor-pointer dark:bg-gray-900 dark:text-white dark:border dark:border-gray-700",children:"Dark"}),l.jsx(d,{value:"system",className:"bg-gray-500 text-white px-4 py-2 rounded-sm text-xs cursor-pointer dark:bg-gray-900 dark:text-white dark:border dark:border-gray-700",children:"System"})]})]})}),l.jsx(o,{className:"my-8 h-px bg-gray-300"}),l.jsxs("article",{className:"border border-red-500 rounded-sm flex flex-col gap-6",children:[l.jsxs("div",{className:"flex flex-col gap-2 p-4",children:[l.jsx("h2",{className:"text-lg font-bold",children:"Supprimer mon compte"}),l.jsx("p",{children:"Supprimer votre compte utilisateur et toutes vos données associées. Cette action est irréversible."})]}),l.jsxs("div",{className:"flex justify-end p-4 border-t border-red-500",children:[l.jsx("button",{type:"button",className:"bg-red-500 text-white px-4 py-2 rounded-sm text-sm",onClick:()=>c(!0),children:"Supprimer mon compte"}),l.jsx(N,{open:m,onOpenChange:c,children:l.jsxs(v,{children:[l.jsx(w,{children:"Supprimer mon compte"}),l.jsx(o,{className:"my-4 -mx-4 h-px bg-gray-300"}),l.jsx(_,{className:"mb-6",children:"Si vous souhaitez supprimer votre compte, veuillez cliquer sur le bouton ci-dessous."}),l.jsxs("div",{className:"flex justify-end gap-2 px-2",children:[l.jsx("button",{type:"button",className:"bg-gray-500 text-white px-4 py-2 rounded-sm text-xs",onClick:()=>c(!1),children:"Annuler"}),l.jsx("button",{type:"button",className:"bg-red-500 text-white px-4 py-2 rounded-sm text-xs",disabled:P,onClick:function(){F({data:{userId:n.user.id}})},children:P?"Suppression en cours...":"Supprimer mon compte"})]})]})})]})]})]})]})};export{Ie as component};
//# sourceMappingURL=preferences-B98srASG.mjs.map
