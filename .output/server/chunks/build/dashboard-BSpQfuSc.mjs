import{aH as e,at as t,t as s,aI as a,c as r,r as n,j as d,aJ as i,aK as o,aL as l,M as c}from"../nitro/nitro.mjs";import{i as u}from"./trash-BEra1ZVi.mjs";import{p,d as x}from"./constantes-BPJ6_ssB.mjs";import"node:net";import"node:stream";import"node:events";import"node:process";import"node:buffer";import"node:timers";import"node:async_hooks";import"node:url";import"node:stream/web";import"node:crypto";const b=l("app_lib_api_admin_mutations_update-user-role_ts--updateUserRoleFn_createServerFn_handler","/_server"),h=r({method:"POST"}).validator((e=>e)).handler(b),y=l("app_lib_api_companies_mutations_update-company-status_ts--updateCompanyStatus_createServerFn_handler","/_server"),g=r({method:"POST"}).validator((e=>e)).handler(y),de=function(){const r=e.useRouteContext(),{data:l}=t(i()),{data:b}=t(o),{mutate:y}=s({mutationFn:a(g)}),{mutate:j}=s({mutationFn:a(p)}),{mutate:v,isPending:N}=s({mutationFn:a(h)}),_=n.useRef(""),f=n.useRef("");function i$1(e,t){f.current=e,y({data:{companyId:e,status:t}},{onSuccess:()=>{c.success("Company status updated"),r.queryClient.invalidateQueries({queryKey:["companies"]})}})}function m(e,t){_.current=e,v({data:{userId:e,role:t}},{onSuccess:()=>{c.success("User role updated"),r.queryClient.invalidateQueries({queryKey:["users"]})}})}return d.jsx("main",{children:d.jsxs("div",{className:"container px-4 py-6 grid gap-6",children:[d.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Dashboard"}),d.jsxs("div",{className:"grid gap-4",children:[d.jsx("h2",{className:"text-lg font-bold",children:"Companies"}),d.jsx("div",{className:"grid gap-4",children:null==l?void 0:l.map((e=>d.jsxs("div",{className:"bg-white shadow-md rounded-lg p-4 border border-gray-200",children:[d.jsx("h2",{className:"text-lg font-bold",children:e.name}),d.jsx("p",{className:"text-sm text-gray-500",children:x[e.status]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{name:"action",value:"accept",type:"button",className:"bg-green-500 text-white px-4 py-2 rounded-md text-xs disabled:opacity-50 disabled:cursor-not-allowed",disabled:"active"===e.status,onClick:()=>i$1(e.id,"active"),children:"Accepter"}),d.jsx("button",{name:"action",value:"reject",type:"button",className:"bg-red-500 text-white px-4 py-2 rounded-md text-xs disabled:opacity-50 disabled:cursor-not-allowed",disabled:"rejected"===e.status,onClick:()=>i$1(e.id,"rejected"),children:"Rejeter"}),d.jsx("button",{type:"button",className:"bg-blue-500 text-white px-4 py-2 rounded-md text-xs disabled:opacity-50 disabled:cursor-not-allowed",disabled:"pending"===e.status,onClick:()=>i$1(e.id,"pending"),children:"En attente"})]}),d.jsx("button",{type:"button",className:"text-xs text-gray-500 border px-2 py-1 rounded-sm hover:bg-gray-100 transition-colors",onClick:()=>function(e,t){j({data:{companyId:e,companySlug:t}},{onSuccess:()=>{c.success("Company deleted"),r.queryClient.invalidateQueries({queryKey:["companies"]})}})}(e.id,e.slug),children:d.jsx(u,{})})]},e.id)))})]}),d.jsxs("div",{className:"grid gap-4",children:[d.jsx("h2",{className:"text-lg font-bold",children:"Users"}),d.jsx("div",{className:"grid gap-4",children:null==b?void 0:b.map((e=>d.jsxs("div",{className:"bg-white shadow-md rounded-lg p-4 border border-gray-200",children:[d.jsx("p",{children:e.name}),d.jsx("p",{children:e.email}),d.jsx("p",{children:e.role}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"button",className:"text-xs text-gray-500 border px-2 py-1 rounded-sm hover:bg-gray-100 transition-colors",onClick:()=>m(e.id,"admin"),children:N&&_.current===e.id&&"user"===e.role?"Updating...":"Set as admin"}),d.jsx("button",{type:"button",className:"text-xs text-gray-500 border px-2 py-1 rounded-sm hover:bg-gray-100 transition-colors",onClick:()=>m(e.id,"user"),children:N&&_.current===e.id&&"admin"===e.role?"Updating...":"Set as user"})]})]},e.id)))})]})]})})};export{de as component};
//# sourceMappingURL=dashboard-BSpQfuSc.mjs.map
