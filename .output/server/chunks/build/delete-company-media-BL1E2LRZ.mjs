import{d as e,l as o}from"./index-8Htcofqc.mjs";import{_ as r}from"./companies-l5PKOmvG.mjs";import{m as t}from"./cloudinary-BTIR3bRv.mjs";import{c as a,f as i}from"../nitro/nitro.mjs";import"../_/main.mjs";import"node:events";import"node:buffer";import"node:stream";import"../_/server.mjs";import"node:path";import"./auth-BsEI6_U5.mjs";import"node:url";import"node:querystring";import"node:timers";import"node:net";import"node:process";import"node:async_hooks";import"node:stream/web";import"node:crypto";const n=e("app_lib_api_companies_mutations_delete-company-media_ts--deleteCompanyLogo_createServerFn_handler","/_server",((e,o)=>d.__executeServer(e,o))),m=e("app_lib_api_companies_mutations_delete-company-media_ts--deleteCompanyMedia_createServerFn_handler","/_server",((e,o)=>p.__executeServer(e,o))),d=a({method:"POST"}).validator((e=>e)).handler(n,(async({data:e})=>{const{companyId:a,publicId:n}=e;await t(n),await o.update(r).set({logo:null}).where(i(r.id,a))})),p=a({method:"POST"}).validator((e=>e)).handler(m,(async({data:e})=>{const{companyId:a,publicId:n,type:m,index:d}=e;if("logo"===m&&(await t(n),await o.update(r).set({logo:null}).where(i(r.id,a))),"gallery"===m){const[e]=await o.select().from(r).where(i(r.id,a));if(!e)throw new Error("Company not found");const m=e.gallery.filter(((e,o)=>o!==d));await t(n),await o.update(r).set({gallery:m}).where(i(r.id,a))}}));export{n as deleteCompanyLogo_createServerFn_handler,m as deleteCompanyMedia_createServerFn_handler};
//# sourceMappingURL=delete-company-media-BL1E2LRZ.mjs.map
