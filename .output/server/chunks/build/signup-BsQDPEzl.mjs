import{c as e,N as r,Q as o,j as t,U as s,V as a,W as n,X as i,Y as m,Z as p,$ as c,a0 as d,a1 as l,a2 as u}from"../nitro/nitro.mjs";import{A as v,R as _}from"../_/index.mjs";import{E as h}from"./auth.server-DtTByMvE.mjs";import{d as j}from"./index-8Htcofqc.mjs";import"node:net";import"node:stream";import"node:events";import"node:process";import"node:buffer";import"node:timers";import"node:async_hooks";import"node:url";import"node:stream/web";import"node:crypto";import"./auth-BsEI6_U5.mjs";import"../_/main.mjs";import"../_/server.mjs";import"node:path";const f=a({email:m(d(),c("Veuillez entrer votre email"),u("Veuillez entrer un email valide")),password:m(d(),l(8,"Le mot de passe doit contenir au moins 8 caractères"),p(100,"Le mot de passe doit contenir au plus 100 caractères")),firstName:m(d(),c("Veuillez entrer votre prénom"),p(100,"Le prénom doit contenir au plus 100 caractères")),lastName:m(d(),c("Veuillez entrer votre nom"),p(100,"Le nom doit contenir au plus 100 caractères"))}),g=j("app_routes_auth_signup_tsx--signupFn_createServerFn_handler","/_server",((e,r)=>w.__executeServer(e,r))),w=e().validator((e=>r(f,e))).handler(g,(async({data:e})=>{try{await h.api.signUpEmail({body:{email:e.email,password:e.password,name:`${e.firstName} ${e.lastName}`}})}catch(e){if(e instanceof v)return{status:"error",message:e.message}}const r=new _(o.env.RESEND_API_KEY),{data:a,error:n}=await r.emails.send({from:"Acme <onboarding@resend.dev>",to:"cedgourville@gmail.com",subject:"Bienvenue sur l'application de gestion de projet",react:t.jsxs("div",{children:[t.jsx("h1",{children:"Bienvenue sur l'application de gestion de projet"}),t.jsx("p",{children:"Votre compte a été créé avec succès"})]})});throw n&&console.error(n),console.log(a),s({to:"/compte/entreprises"})})),x=n("/(auth)/signup")({component:i((()=>import("./signup-BBujVTuF.mjs")),"component",(()=>x.ssr)),beforeLoad:async({context:e})=>{if(e.user)throw s({to:"/compte/entreprises"})}});export{g as signupFn_createServerFn_handler};
//# sourceMappingURL=signup-BsQDPEzl.mjs.map
