import{bl as e,r as s,bm as a,aG as l,b8 as t,t as r,aI as n,bn as i,j as d,n as o,o as c,P as m,C as x,_ as p,aW as u,b9 as h,M as f}from"../nitro/nitro.mjs";import{p as j}from"./input-DBDjV_JP.mjs";import{l as g}from"./label-DH_rTUQU.mjs";import{e as N}from"./close--xrcrNXd.mjs";import{e as y}from"./chevron-down-CM3ht1vz.mjs";import{i as b,r as v,o as w,e as _,h as k,n as z}from"./globe-BUymkEPS.mjs";import{_ as E}from"./update-company-infos-bKDWJV6w.mjs";import"node:net";import"node:stream";import"node:events";import"node:process";import"node:buffer";import"node:timers";import"node:async_hooks";import"node:url";import"node:stream/web";import"node:crypto";import"./company.schema-5gxzbh_J.mjs";import"../_/index2.mjs";const Ee=function(){var V,C,S,q,P,D,M,R,I,Q,F,H,J,K,L,U,A,B,O,T,W,G,X,$,Y,Z,ee,se,ae,le,te,re,ne,ie,de,oe;const ce=e.useRouteContext(),me=e.useParams(),xe=e.useNavigate(),pe=s.useRef(null),[ue,he]=a({queries:[l,t(me.slug)]}),{mutate:fe,isPending:je}=r({mutationFn:n(E)}),[ge,Ne]=s.useState(new Set(null==(V=he.data)?void 0:V.categories.map((e=>{var s;return null!=(s=null==e?void 0:e.id)?s:""})))),[ye,be]=s.useState(null!=(q=null==(S=null==(C=he.data)?void 0:C.description)?void 0:S.length)?q:0);return i((e=>e.setPreview)),d.jsx("div",{className:"container py-6",children:d.jsxs("div",{className:"max-w-xl mx-auto",children:[d.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Référencez votre entreprise"}),d.jsxs("form",{className:"flex flex-col gap-3",ref:pe,onSubmit:function(e){e.preventDefault();const s=new FormData(e.target);fe({data:s},{onSuccess:()=>{ce.queryClient.invalidateQueries({queryKey:["user","companies"]}),ce.queryClient.invalidateQueries({queryKey:["company",me.slug]}),f.success("Entreprise mise à jour avec succès"),xe({to:"/compte/entreprises"})},onError:e=>{f.error(e.message)}})},children:[d.jsx("input",{type:"hidden",name:"companyId",value:null==(P=he.data)?void 0:P.id}),d.jsxs(g,{className:"flex flex-col gap-1",children:[d.jsx("span",{className:"text-xs font-medium",children:"Nom de l'entreprise *"}),d.jsx(j,{type:"text",name:"name",placeholder:"Ex: mon entreprise",className:"placeholder:text-xs",defaultValue:null==(D=he.data)?void 0:D.name})]}),d.jsxs(g,{className:"flex flex-col gap-1",children:[d.jsx("span",{className:"text-xs font-medium",children:"Siret *"}),d.jsx(j,{type:"text",name:"siret",placeholder:"Ex: 12345678901234",className:"placeholder:text-xs",defaultValue:null==(M=he.data)?void 0:M.siret})]}),d.jsxs(g,{className:"flex flex-col gap-1",children:[d.jsx("span",{className:"text-xs font-medium",children:"Catégories * (max. 3)"}),d.jsxs(o,{children:[d.jsxs(c,{className:"h-9 cursor-pointer border rounded-sm border-gray-300 px-2 py-1 text-xs flex items-center justify-between gap-2",children:[d.jsx("span",{className:"rounded-sm text-xs flex items-center gap-2 text-gray-400",children:"Ajouter une catégorie"}),d.jsx(y,{className:"size-5 text-gray-500"})]}),d.jsx(m,{children:d.jsx(x,{className:"bg-white w-(--radix-popper-anchor-width)",sideOffset:5,children:d.jsxs(p,{className:"border rounded-sm border-gray-300",children:[d.jsx(p.Input,{placeholder:"Rechercher une catégorie",className:"w-full h-10 px-2 outline-none placeholder:text-sm placeholder:font-light"}),d.jsx(p.Separator,{className:"h-px bg-gray-300"}),d.jsx(p.List,{className:"max-h-60 overflow-y-auto",children:null==(R=ue.data)?void 0:R.map((e=>d.jsx(p.Item,{value:e.name,disabled:ge.has(e.id),className:"cursor-pointer py-1.5 px-2 aria-selected:bg-gray-100 text-sm font-light aria-disabled:opacity-20",onSelect:()=>function(e){Ne((s=>s.size>=3?(f.error("Vous ne pouvez pas sélectionner plus de 3 catégories"),s):new Set(s).add(e)))}(e.id),children:e.name},e.id)))})]})})})]})]}),ge.size?d.jsx("ul",{className:"flex flex-wrap gap-2",children:Array.from(ge.values()).map(((e,s)=>{var a;const l=null==(a=ue.data)?void 0:a.find((s=>s.id===e));return l?d.jsxs("li",{className:"bg-gray-400 text-white px-2 py-1 rounded-sm text-xs flex items-center gap-2",children:[d.jsx("input",{type:"hidden",name:`categories[${s}]`,value:l.id}),d.jsx("span",{className:"max-w-[30ch] truncate",children:l.name}),d.jsx("button",{type:"button",className:"text-white inline-grid place-items-center cursor-pointer",onClick:()=>function(e){Ne((s=>{const a=new Set(s);return a.delete(e),a}))}(l.id),children:d.jsx(N,{className:"size-3 text-white"})})]},l.id):null}))}):null,d.jsx(u,{className:"h-px bg-gray-300 my-4"}),d.jsxs("div",{className:"grid gap-1",children:[d.jsxs(g,{className:"flex flex-col gap-1",children:[d.jsx("span",{className:"text-xs font-medium",children:"Description"}),d.jsx("textarea",{name:"description",className:"border rounded-sm p-2 border-gray-300 resize-none placeholder:text-xs",rows:4,placeholder:"Entrer une description de mon entreprise...",onChange:function(e){be(e.target.value.length)},defaultValue:null!=(Q=null==(I=he.data)?void 0:I.description)?Q:""})]}),d.jsxs("span",{className:"text-xs text-gray-500 justify-self-end",children:[ye,"/1500"]})]}),d.jsxs(g,{className:"flex flex-col gap-1",children:[d.jsx("span",{className:"text-xs font-medium",children:"Entrepreneur"}),d.jsx(j,{type:"text",name:"business_owner",placeholder:"Ex: Nom Prénom",className:"placeholder:text-xs",defaultValue:null!=(H=null==(F=he.data)?void 0:F.business_owner)?H:""})]}),d.jsxs(g,{className:"flex flex-col gap-1",children:[d.jsx("span",{className:"text-xs font-medium",children:"Perimètre d'intervention"}),d.jsx(j,{type:"text",name:"service_area",placeholder:"Ex: Paris, Lyon, Marseille",className:"placeholder:text-xs",defaultValue:null!=(K=null==(J=he.data)?void 0:J.service_area)?K:""})]}),d.jsxs(g,{className:"flex flex-col gap-1",children:[d.jsx("span",{className:"text-xs font-medium",children:"Sous-domaine"}),d.jsx(j,{type:"text",name:"subdomain",placeholder:"Ex: monentreprise",className:"placeholder:text-xs",defaultValue:null!=(U=null==(L=he.data)?void 0:L.subdomain)?U:""})]}),d.jsxs(g,{className:"flex flex-col gap-1",children:[d.jsx("span",{className:"text-xs font-medium",children:"Email"}),d.jsxs("div",{className:"flex items-center gap-2 border rounded-sm border-gray-300 h-9 px-2 focus-within:border-gray-500",children:[d.jsx(b,{className:"size-5 text-gray-500"}),d.jsx("input",{type:"email",name:"email",placeholder:"Ex: contact@monentreprise.com",className:"placeholder:text-xs outline-none w-full",defaultValue:null!=(B=null==(A=he.data)?void 0:A.email)?B:""})]})]}),d.jsxs(g,{className:"flex flex-col gap-1",children:[d.jsx("span",{className:"text-xs font-medium",children:"Numéro de téléphone"}),d.jsxs("div",{className:"flex items-center gap-2 border rounded-sm border-gray-300 h-9 px-2 focus-within:border-gray-500",children:[d.jsx(v,{className:"size-5 text-gray-500"}),d.jsx("input",{type:"tel",name:"phone",placeholder:"Ex: 06 06 06 06 06",className:"placeholder:text-xs outline-none w-full",defaultValue:null!=(T=null==(O=he.data)?void 0:O.phone)?T:""})]})]}),d.jsxs(g,{className:"flex flex-col gap-1",children:[d.jsx("span",{className:"text-xs font-medium",children:"Site web"}),d.jsxs("div",{className:"flex items-center gap-2 border rounded-sm border-gray-300 h-9 px-2 focus-within:border-gray-500",children:[d.jsx(w,{className:"size-5 text-gray-500"}),d.jsx("input",{type:"text",name:"website",placeholder:"Ex: https://www.monentreprise.com",className:"placeholder:text-xs outline-none w-full",defaultValue:null!=(G=null==(W=he.data)?void 0:W.website)?G:""})]})]}),d.jsx(u,{className:"h-px bg-gray-300 my-4"}),d.jsxs("fieldset",{className:"flex flex-col gap-4",children:[d.jsx("legend",{className:"text-xs font-medium mb-2",children:"Réseaux sociaux"}),d.jsxs(g,{children:[d.jsx("span",{className:"sr-only",children:"Linkedin"}),d.jsxs("div",{className:"flex items-center gap-2 border rounded-sm border-gray-300 h-9 px-2 focus-within:border-gray-500",children:[d.jsx(h,{className:"size-5 text-gray-500"}),d.jsx("input",{type:"text",name:"social_media.linkedin",placeholder:"Ex: https://www.linkedin.com/company/monentreprise",className:"placeholder:text-xs outline-none w-full",defaultValue:null!=($=null==(X=he.data)?void 0:X.social_media.linkedin)?$:""})]})]}),d.jsxs(g,{children:[d.jsx("span",{className:"sr-only",children:"Facebook"}),d.jsxs("div",{className:"flex items-center gap-2 border rounded-sm border-gray-300 h-9 px-2 focus-within:border-gray-500",children:[d.jsx(_,{className:"size-5 text-gray-500"}),d.jsx("input",{type:"text",name:"social_media.facebook",placeholder:"Ex: https://www.facebook.com/monentreprise",className:"placeholder:text-xs outline-none w-full",defaultValue:null!=(Z=null==(Y=he.data)?void 0:Y.social_media.facebook)?Z:""})]})]}),d.jsxs(g,{children:[d.jsx("span",{className:"sr-only",children:"Instagram"}),d.jsxs("div",{className:"flex items-center gap-2 border rounded-sm border-gray-300 h-9 px-2 focus-within:border-gray-500",children:[d.jsx(k,{className:"size-5 text-gray-500"}),d.jsx("input",{type:"text",name:"social_media.instagram",placeholder:"Ex: https://www.instagram.com/monentreprise",className:"placeholder:text-xs outline-none w-full",defaultValue:null!=(se=null==(ee=he.data)?void 0:ee.social_media.instagram)?se:""})]})]}),d.jsxs(g,{children:[d.jsx("span",{className:"sr-only",children:"Calendly"}),d.jsxs("div",{className:"flex items-center gap-2 border rounded-sm border-gray-300 h-9 px-2 focus-within:border-gray-500",children:[d.jsx(z,{className:"size-5 text-gray-500"}),d.jsx("input",{type:"text",name:"social_media.calendly",placeholder:"Ex: https://calendly.com/monentreprise",className:"placeholder:text-xs outline-none w-full",defaultValue:null!=(le=null==(ae=he.data)?void 0:ae.social_media.calendly)?le:""})]})]})]}),d.jsx(u,{className:"h-px bg-gray-300 my-4"}),d.jsxs("div",{className:"grid gap-8",children:[d.jsxs("fieldset",{className:"flex gap-4",children:[d.jsx("legend",{className:"text-xs font-medium mb-2",children:"Mode de travail"}),d.jsxs(g,{className:"flex items-center gap-1",children:[d.jsx(j,{type:"radio",name:"work_mode",value:"not_specified",defaultChecked:"not_specified"===(null==(te=he.data)?void 0:te.work_mode),className:"size-4 accent-gray-600"}),d.jsx("span",{className:"text-xs",children:"Non spécifié"})]}),d.jsxs(g,{className:"flex items-center gap-1",children:[d.jsx(j,{type:"radio",name:"work_mode",value:"remote",defaultChecked:"remote"===(null==(re=he.data)?void 0:re.work_mode),className:"size-4 accent-gray-600"}),d.jsx("span",{className:"text-xs",children:"À distance"})]}),d.jsxs(g,{className:"flex items-center gap-1",children:[d.jsx(j,{type:"radio",name:"work_mode",value:"onsite",defaultChecked:"onsite"===(null==(ne=he.data)?void 0:ne.work_mode),className:"size-4 accent-gray-600"}),d.jsx("span",{className:"text-xs",children:"Sur site"})]}),d.jsxs(g,{className:"flex items-center gap-1",children:[d.jsx(j,{type:"radio",name:"work_mode",value:"hybrid",defaultChecked:"hybrid"===(null==(ie=he.data)?void 0:ie.work_mode),className:"size-4 accent-gray-600"}),d.jsx("span",{className:"text-xs",children:"Hybride"})]})]}),d.jsxs("fieldset",{className:"flex gap-2",children:[d.jsx("legend",{className:"text-xs font-medium mb-2",children:"RQTH"}),d.jsxs(g,{className:"flex items-center gap-1",children:[d.jsx(j,{type:"radio",name:"rqth",value:"true",defaultChecked:null==(de=he.data)?void 0:de.rqth,className:"size-4 accent-gray-600"}),d.jsx("span",{className:"text-xs",children:"Oui"})]}),d.jsxs(g,{className:"flex items-center gap-1",children:[d.jsx(j,{type:"radio",name:"rqth",value:"false",defaultChecked:!(null==(oe=he.data)?void 0:oe.rqth),className:"size-4 accent-gray-600"}),d.jsx("span",{className:"text-xs",children:"Non"})]})]})]}),d.jsx(u,{className:"h-px bg-gray-300 my-4"}),d.jsx("div",{className:"flex gap-2 justify-end",children:d.jsx("button",{type:"submit",className:"bg-gray-800 text-white px-3 py-2 rounded-sm font-light text-xs",disabled:je,children:je?"Mise à jour en cours...":"Mettre à jour"})})]})]})})};export{Ee as component};
//# sourceMappingURL=infos-C1-hKJDH.mjs.map
