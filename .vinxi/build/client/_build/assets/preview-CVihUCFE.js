import{ah as c,l as h,q as j,s as N,r as y,j as e,L as d,Z as b,t as v}from"./client-0TpWmm9u.js";import{u as w}from"./useSuspenseQuery-BxnlANRH.js";import{C as I}from"./company-logo-BIcO5KEX.js";import{C,L as k}from"./link-chain-BOAVNjAZ.js";import{E as _,P as E,G as z,C as O,I as R,F as S}from"./globe-nPYG3DDN.js";import{u as L}from"./use-image-preview-DNlebQzt.js";import{c as q}from"./create-company-BvDV2e-_.js";import{R as F}from"./index-Dt2I4tfU.js";const M={remote:"À distance",hybrid:"Hybride",onsite:"Sur site",not_specified:"Non spécifié"},D={facebook:e.jsx(S,{className:"size-5"}),instagram:e.jsx(R,{className:"size-5"}),linkedin:e.jsx(b,{className:"size-5"}),calendly:e.jsx(O,{className:"size-5"})},T=function(){const{preview:s,queryClient:m}=c.useRouteContext(),{data:x}=w(h),p=c.useNavigate(),{imagePreviews:t,readImage:l}=L(),{mutate:g,isPending:i}=j({mutationFn:N(q)});y.useEffect(()=>{s.logo&&l({type:"logo",file:s.logo}),s.gallery&&s.gallery.forEach((a,n)=>{l({type:"gallery",file:a,index:n})})},[s.logo,s.gallery,l]);const o={facebook:s.social_media.facebook,instagram:s.social_media.instagram,linkedin:s.social_media.linkedin,calendly:s.social_media.calendly},f=Object.values(o).every(a=>a==="");function u(){const a=new FormData;for(const[n,r]of Object.entries(s))typeof r=="string"&&a.append(n,r);for(const n of s.categories)a.append("categories",n);if(s.logo&&a.append("logo",s.logo),s.gallery)for(const n of s.gallery)a.append("gallery",n);console.log(Object.fromEntries(a.entries())),g({data:a},{onSuccess:()=>{v.success("Entreprise créée avec succès"),m.invalidateQueries({queryKey:["user","companies"]}),p({to:"/compte/entreprises"})}})}return e.jsxs("main",{className:"px-4 py-8 grid gap-4",children:[e.jsx(d,{to:"/compte/entreprises/create",className:"text-sm text-gray-500",children:"Retour"}),e.jsxs("div",{className:"container flex justify-between gap-4 border border-gray-300 p-6 rounded-sm",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(I,{url:t.logo,name:s.name,size:"lg"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.name}),e.jsx(C,{children:s.siret})]}),s.categories.length?e.jsx("ul",{className:"flex flex-wrap gap-2",children:s.categories?.map(a=>{const n=x.find(r=>r.id===a);return n?e.jsx("li",{className:"bg-gray-400 text-white px-2 py-1 rounded-sm text-xs",children:e.jsx("span",{className:"max-w-[30ch] truncate",children:n.name})},n.id):null})}):null]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{type:"button",className:"bg-gray-100 p-2 rounded-sm cursor-pointer h-min",children:e.jsx(k,{className:"size-5"})})})]}),e.jsxs("div",{className:"container flex gap-2",children:[e.jsxs("div",{className:"flex-1 flex flex-col justify-center gap-4 border border-gray-300 p-6 rounded-sm",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"size-5"}),e.jsx("p",{className:"text-xs text-gray-500",children:s.email||"Non renseigné"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"size-5"}),e.jsx("p",{className:"text-xs text-gray-500",children:s.phone||"Non renseigné"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"size-5"}),s.website?e.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-gray-500",children:s.website}):e.jsx("span",{className:"text-xs text-gray-500",children:"Non renseigné"})]})]}),f?null:e.jsx("ul",{className:"flex gap-2",children:Object.entries(o).map(([a,n])=>e.jsx("li",{children:e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:D[a]})},a))})]}),e.jsxs("div",{className:"flex-1 border border-gray-300 p-6 rounded-sm flex flex-col gap-2",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-bold",children:"Entrepreneur:"})," ",s.business_owner||"Non renseigné"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-bold",children:"Zone géographique:"})," ",s.service_area||"Non renseigné"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-bold",children:"Mode de travail:"})," ",M[s.work_mode??"not_specified"]]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-bold",children:"RQTH:"})," ",s.rqth?"Oui":"Non"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-bold",children:"Sous domaine:"})," ",s.subdomain||"Non renseigné"]})]})]}),e.jsxs("div",{className:"container border border-gray-300 p-6 rounded-sm grid gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-500 text-pretty",children:s.description||"Non renseigné"})]}),t.gallery.length?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-px bg-gray-300 my-4"}),e.jsx("ul",{className:"flex flex-wrap gap-2",children:t.gallery.map((a,n)=>e.jsx("li",{children:e.jsx("img",{src:a,alt:s.name,className:"size-16 aspect-square rounded-sm"})},n))})]}):null]}),e.jsxs("div",{className:"container flex justify-end gap-2",children:[e.jsx(d,{to:"/compte/entreprises/create",className:"bg-gray-800 text-white px-3 py-2 rounded-sm font-light text-xs",children:"Retour"}),e.jsx("button",{type:"submit",className:"bg-gray-800 text-white px-3 py-2 rounded-sm font-light text-xs",onClick:u,disabled:i,children:i?"Validation en cours...":"Valider"})]})]})};export{T as component};
