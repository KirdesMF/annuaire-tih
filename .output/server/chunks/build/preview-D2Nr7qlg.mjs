import{bj as e,at as s,t as a,aI as l,r,j as n,L as i,aW as t,aG as o,b9 as c,M as d}from"../nitro/nitro.mjs";import{l as m}from"./company-logo-B5lxhvXb.mjs";import{c as x,l as p}from"./link-chain-ChxIEzv5.mjs";import{i as g,r as u,o as j,n as f,h,e as N}from"./globe-BUymkEPS.mjs";import{c as y}from"./use-image-preview-D0S5Wc-4.mjs";import{_ as b}from"./update-company-infos-bKDWJV6w.mjs";import"node:net";import"node:stream";import"node:events";import"node:process";import"node:buffer";import"node:timers";import"node:async_hooks";import"node:url";import"node:stream/web";import"node:crypto";import"./company.schema-5gxzbh_J.mjs";import"../_/index2.mjs";const v={remote:"À distance",hybrid:"Hybride",onsite:"Sur site",not_specified:"Non spécifié"},w={facebook:n.jsx(N,{className:"size-5"}),instagram:n.jsx(h,{className:"size-5"}),linkedin:n.jsx(c,{className:"size-5"}),calendly:n.jsx(f,{className:"size-5"})},ve=function(){var c,f,h,N,_,k,z,E;const{preview:q,queryClient:O}=e.useRouteContext(),S=e.useParams(),C=e.useNavigate(),{data:D}=s(o),{imagePreviews:P,readImage:F}=y(),{mutate:I,isPending:K}=a({mutationFn:l(b)});r.useEffect((()=>{q.logo&&F({type:"logo",file:q.logo}),q.gallery&&q.gallery.forEach(((e,s)=>{F({type:"gallery",file:e,index:s})}))}),[q.logo,q.gallery,F]);const Q={facebook:null==(c=q.social_media)?void 0:c.facebook,instagram:null==(f=q.social_media)?void 0:f.instagram,linkedin:null==(h=q.social_media)?void 0:h.linkedin,calendly:null==(N=q.social_media)?void 0:N.calendly},R=Object.values(Q).every((e=>""===e));return n.jsxs("main",{className:"px-4 py-8 grid gap-4",children:[n.jsx(i,{to:"/compte/entreprises/$slug/edit/infos",params:{slug:S.slug},className:"text-sm text-gray-500",children:"Retour"}),n.jsxs("div",{className:"container flex justify-between gap-4 border border-gray-300 p-6 rounded-sm",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(m,{url:P.logo,name:null!=(_=q.name)?_:"",size:"lg"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h1",{className:"text-2xl font-bold",children:q.name}),n.jsx(x,{children:q.siret})]}),(null==(k=q.categories)?void 0:k.length)?n.jsx("ul",{className:"flex flex-wrap gap-2",children:null==(z=q.categories)?void 0:z.map((e=>{const s=D.find((s=>s.id===e));return s?n.jsx("li",{className:"bg-gray-400 text-white px-2 py-1 rounded-sm text-xs",children:n.jsx("span",{className:"max-w-[30ch] truncate",children:s.name})},s.id):null}))}):null]}),n.jsx("div",{className:"flex gap-2",children:n.jsx("button",{type:"button",className:"bg-gray-100 p-2 rounded-sm cursor-pointer h-min",children:n.jsx(p,{className:"size-5"})})})]}),n.jsxs("div",{className:"container flex gap-2",children:[n.jsxs("div",{className:"flex-1 flex flex-col justify-center gap-4 border border-gray-300 p-6 rounded-sm",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(g,{className:"size-5"}),n.jsx("p",{className:"text-xs text-gray-500",children:q.email||"Non renseigné"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(u,{className:"size-5"}),n.jsx("p",{className:"text-xs text-gray-500",children:q.phone||"Non renseigné"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(j,{className:"size-5"}),q.website?n.jsx("a",{href:q.website,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-gray-500",children:q.website}):n.jsx("span",{className:"text-xs text-gray-500",children:"Non renseigné"})]})]}),R?null:n.jsx("ul",{className:"flex gap-2",children:Object.entries(Q).map((([e,s])=>n.jsx("li",{children:n.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:w[e]})},e)))})]}),n.jsxs("div",{className:"flex-1 border border-gray-300 p-6 rounded-sm flex flex-col gap-2",children:[n.jsxs("p",{className:"text-sm text-gray-500",children:[n.jsx("span",{className:"font-bold",children:"Entrepreneur:"})," ",q.business_owner||"Non renseigné"]}),n.jsxs("p",{className:"text-sm text-gray-500",children:[n.jsx("span",{className:"font-bold",children:"Zone géographique:"})," ",q.service_area||"Non renseigné"]}),n.jsxs("p",{className:"text-sm text-gray-500",children:[n.jsx("span",{className:"font-bold",children:"Mode de travail:"})," ",v[null!=(E=q.work_mode)?E:"not_specified"]]}),n.jsxs("p",{className:"text-sm text-gray-500",children:[n.jsx("span",{className:"font-bold",children:"RQTH:"})," ",q.rqth?"Oui":"Non"]}),n.jsxs("p",{className:"text-sm text-gray-500",children:[n.jsx("span",{className:"font-bold",children:"Sous domaine:"})," ",q.subdomain||"Non renseigné"]})]})]}),n.jsxs("div",{className:"container border border-gray-300 p-6 rounded-sm grid gap-4",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("h2",{className:"text-lg font-bold",children:"Description"}),n.jsx("p",{className:"text-sm text-gray-500 text-pretty",children:q.description||"Non renseigné"})]}),P.gallery.length?n.jsxs(n.Fragment,{children:[n.jsx(t,{className:"h-px bg-gray-300 my-4"}),n.jsx("ul",{className:"flex flex-wrap gap-2",children:P.gallery.map(((e,s)=>n.jsx("li",{children:n.jsx("img",{src:e,alt:q.name,className:"size-16 aspect-square rounded-sm"})},s)))})]}):null]}),n.jsx("div",{className:"container flex justify-end gap-2",children:n.jsx("button",{type:"submit",className:"bg-gray-800 text-white px-3 py-2 rounded-sm font-light text-xs",onClick:function(){var e;const s=new FormData;for(const[e,a]of Object.entries(q))"string"==typeof a&&s.append(e,a);for(const a of null!=(e=null==q?void 0:q.categories)?e:[])s.append("categories",a);if(q.logo&&s.append("logo",q.logo),q.gallery)for(const e of q.gallery)s.append("gallery",e);console.log(Object.fromEntries(s.entries())),I({data:s},{onSuccess:()=>{d.success("Entreprise mise à jour avec succès"),O.invalidateQueries({queryKey:["user","companies"]}),O.invalidateQueries({queryKey:["company",S.slug]}),C({to:"/compte/entreprises"})}})},disabled:K,children:K?"Validation en cours...":"Valider"})})]})};export{ve as component};
//# sourceMappingURL=preview-D2Nr7qlg.mjs.map
