import{createFileRoute as t,lazyRouteComponent as i,redirect as n}from"@tanstack/react-router";import*as o from"valibot";import{a as p}from"./auth.server-CEln8Kin.js";import{c as m}from"./index-8Htcofqc.js";import{createServerFn as s}from"@tanstack/start-client-core";import"better-auth";import"better-auth/adapters/drizzle";import"better-auth/plugins";import"drizzle-orm/pg-core";import"better-auth/react-start";import"tiny-invariant";import"drizzle-orm/postgres-js";import"postgres";import"dotenv";const a=()=>import("./login-02gR8xUb.js"),c=o.object({email:o.pipe(o.string(),o.email()),password:o.pipe(o.string(),o.minLength(8))}),l=m("app_routes_auth_login_tsx--loginFn_createServerFn_handler","/_server",(e,r)=>_.__executeServer(e,r)),_=s({method:"POST"}).validator(e=>o.parse(c,e)).handler(l,async({data:e})=>{console.log(e),await p.api.signInEmail({body:{email:e.email,password:e.password}})}),g=t("/_auth/login")({component:i(a,"component",()=>g.ssr),beforeLoad:async({context:e})=>{if(e.session?.user)throw n({to:"/compte/entreprises"})}});export{l as loginFn_createServerFn_handler};
